{"version":3,"sources":["components/shared/hooks/myadoptionads-hook.js","components/pages/profile/myadoptionposts/MyAdoptionPosts.js","components/pages/staffPanel/adoptionpostsmanagement/AdoptionPostsManagement.js","components/shared/hooks/fetch-hook.js","components/utils/modal/modalMotion.js","components/utils/modal/Modal.js","components/utils/formErrorMsg/InputError.js","components/pages/profile/myadoptionposts/DeletePostModal.js"],"names":["myAdoptionAds","state","action","type","value","length","field","errorMsg","responseError","isLoading","postToDelete","data","isDeleting","responseData","deleteResult","error","isUpdating","postToUpdate","realId","oldStory","story","editPost","newStory","updateResult","useMyAdoptionAds","initialState","useReducer","initialData","MyAdoptionPosts","useState","openModal","setOpenModal","dispatch","setPageIsLoading","useContext","pageLoadingContext","sendRequest","useFetch","auth","authContext","useEffect","isMount","getMyAdoptionAds","a","URL","userRole","process","token","message","deletePost","console","log","result","updatePost","JSON","stringify","Modal","modalClass","header","body","redirectTo","refresh","style","color","overflowY","InputError","top","margin","class","msg","name","id","cols","rows","placeholder","onChange","e","currentTarget","className","DeletePostModal","closeModal","map","adoptionAd","index","status","target","to","dateFormat","date","ad_id","onClick","getAttribute","disabled","cursor","window","scrollTo","AdoptionPostsManagement","useCallback","url","method","headers","fetch","response","json","parsedData","ok","Error","modalMotion","initial","y","final","exit","modalVariant","props","show","setShow","navigate","useNavigate","AnimatePresence","motion","div","variants","animate","setTimeout","location","reload"],"mappings":"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","file":"static/js/24.bb6553f5.chunk.js","sourcesContent":["import { useReducer } from 'react'\r\n\r\n// This custom hook is currently adjusted to validate registerpet inputs when registering a new pet\r\nconst myAdoptionAds = (state, action) => {\r\n  switch (action.type) {\r\n\r\n\r\n\r\n    // *************** state management when using fetch *******************\r\n\r\n    case 'enterValue': {\r\n      if (action.value.length > 400)\r\n        return {\r\n          ...state,\r\n          [action.field]: {\r\n            ...state[action.field],\r\n            errorMsg: 'Max Characters length is 400 !!',\r\n          }\r\n        }\r\n      return {\r\n        ...state,\r\n        [action.field]: {\r\n          errorMsg: '',\r\n          value: action.value\r\n        }\r\n      }\r\n    }\r\n\r\n    case 'start': {\r\n      return {\r\n        ...state,\r\n        responseError: '',\r\n        isLoading: true\r\n      }\r\n    }\r\n    case 'selectPostToDelete': {\r\n      return {\r\n        ...state,\r\n        postToDelete: action.data\r\n      }\r\n    }\r\n    case 'startDeleting': {\r\n      return {\r\n        ...state,\r\n        responseError: '',\r\n        isDeleting: true\r\n      }\r\n    }\r\n    case 'success': {\r\n      return {\r\n        ...state,\r\n        responseError: '',\r\n        isLoading: false,\r\n        responseData: action.data\r\n      }\r\n    }\r\n    case 'successDelete': {\r\n      return {\r\n        ...state,\r\n        responseError: '',\r\n        isDeleting: false,\r\n        deleteResult: action.data\r\n      }\r\n    }\r\n\r\n    \r\n\r\n    case 'failure': {\r\n      return {\r\n        ...state,\r\n        responseError: action.error,\r\n        isLoading: false,\r\n        isDeleting: false,\r\n        isUpdating: false,\r\n      }\r\n    }\r\n    case 'errorModalExit': {\r\n      return {\r\n        ...state,\r\n        responseError: ''\r\n      }\r\n    }\r\n    case 'selectpostToUpdate': {\r\n      return {\r\n        ...state,\r\n        postToUpdate: action.realId,\r\n        oldStory: state.responseData[action.data].story\r\n\r\n      }\r\n    }\r\n    case 'editModalEnter': {\r\n      return {\r\n        ...state,\r\n        editPost: true\r\n      }\r\n    }\r\n    case 'editModalExit': {\r\n      return {\r\n        ...state,\r\n        newStory: {value: '', errorMsg: ''},\r\n        editPost: false\r\n      }\r\n    }\r\n\r\n    case 'finalConfirm': {\r\n      return {\r\n        ...state,\r\n        editPost: false,\r\n        isUpdating: true\r\n      }\r\n    }\r\n    case 'successUpdate': {\r\n      return {\r\n        ...state,\r\n        responseError: '',\r\n        isUpdating: false,\r\n        updateResult: action.data\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n    default:\r\n      break\r\n  }\r\n}\r\n\r\nconst useMyAdoptionAds = (initialState) => {\r\n  const [state, dispatch] = useReducer(myAdoptionAds, initialState)\r\n  return [state, dispatch]\r\n}\r\nexport default useMyAdoptionAds","import DeletePostModal from \"./DeletePostModal\"\r\nimport { useState, useEffect, useContext } from 'react'\r\nimport { Table, Thead, Tbody, Tr, Th, Td } from 'react-super-responsive-table';\r\nimport 'react-super-responsive-table/dist/SuperResponsiveTableStyle.css';\r\nimport { Link } from 'react-router-dom'\r\nimport useMyAdoptionAds from '../../../shared/hooks/myadoptionads-hook'\r\nimport { pageLoadingContext } from \"../../../shared/context/loading-context\";\r\nimport useFetch from \"../../../shared/hooks/fetch-hook\";\r\nimport { authContext } from \"../../../shared/context/auth-context\";\r\nimport dateFormat from \"dateformat\";\r\nimport Modal from \"../../../utils/modal/Modal\";\r\nimport InputError from \"../../../utils/formErrorMsg/InputError\";\r\n\r\n\r\nconst initialData = {\r\n  isLoading: false,\r\n  responseData: null,\r\n  responseError: '',\r\n  postToDelete: '',\r\n  isDeleting: false,\r\n  deleteResult: '',\r\n  editPost: false,\r\n  postToUpdate: '',\r\n  newStory: {\r\n    value : '',\r\n    errorMsg: ''\r\n  },\r\n  oldStory: '',\r\n  isUpdating: false,\r\n  updateResult: '',\r\n  \r\n}\r\nconst MyAdoptionPosts = () => {\r\n\r\n  const [openModal, setOpenModal] = useState(false)\r\n  const [state, dispatch] = useMyAdoptionAds(initialData)\r\n  const setPageIsLoading = useContext(pageLoadingContext).setPageIsLoading\r\n  const sendRequest = useFetch()\r\n  const auth = useContext(authContext)\r\n\r\n  useEffect(() => {\r\n    let isMount = true\r\n    const getMyAdoptionAds = async () => {\r\n      if (isMount)\r\n        dispatch({ type: 'start' })\r\n      try {\r\n        const URL = `${(auth.userRole === 'receptionist' || auth.userRole === 'admin') ? `${process.env.REACT_APP_BACKEND_URL}receptionist/adoptionads` : `${process.env.REACT_APP_BACKEND_URL}users/me/adoptionads/`}`\r\n\r\n        const myAdoptionAds = await sendRequest(URL, 'GET', null, {\r\n          'Authorization': `Bearer ${auth.token}`\r\n        })\r\n        if (myAdoptionAds && isMount)\r\n          dispatch({ type: 'success', data: myAdoptionAds })\r\n      } catch (e) {\r\n        if (isMount)\r\n          dispatch({ type: 'failure', error: e.message })\r\n      }\r\n    }\r\n    getMyAdoptionAds()\r\n    return () => {\r\n      setPageIsLoading(false)\r\n      isMount = false\r\n    }\r\n  }, [auth.token, auth.userRole, dispatch, sendRequest, setPageIsLoading])\r\n  useEffect(() => {\r\n    let isMount = true\r\n    const deletePost = async () => {\r\n      try {\r\n        \r\n        const URL = `${(auth.userRole === 'receptionist' || auth.userRole === 'admin') ? `${process.env.REACT_APP_BACKEND_URL}receptionist/adoptionads/${state.postToDelete ? state.postToDelete : ''}` : `${process.env.REACT_APP_BACKEND_URL}users/me/adoptionads/${state.postToDelete ? state.postToDelete : ''}`}`\r\n        console.log(URL)\r\n        const result = await sendRequest(URL, 'DELETE', null, {\r\n          'Authorization': `Bearer ${auth.token}`,\r\n        })\r\n        if (result && isMount )\r\n          dispatch({ type: 'successDelete', data: result.result})\r\n      } catch (e) {\r\n        if(isMount) \r\n          dispatch({ type: 'failure', error: e.message })\r\n      }\r\n    }\r\n    if (state.isDeleting && isMount){\r\n      deletePost()\r\n    }\r\n    return () => {\r\n      setPageIsLoading(false)\r\n      isMount = false\r\n    }\r\n  }, [auth.token, auth.userRole, dispatch, sendRequest, setPageIsLoading, state.isDeleting, state.postToDelete])\r\n  useEffect(() => {\r\n    let isMount = true\r\n    const updatePost = async () => {\r\n      try {\r\n        const URL = `${(auth.userRole === 'receptionist' || auth.userRole === 'admin') ? `${process.env.REACT_APP_BACKEND_URL}receptionist/adoptionads/${state.postToUpdate}` : `${process.env.REACT_APP_BACKEND_URL}users/me/adoptionads/${state.postToUpdate}`}`\r\n        const updateResult = await sendRequest(URL, 'PATCH', JSON.stringify({\r\n          story: state.newStory.value\r\n        }), {\r\n          'Authorization': `Bearer ${auth.token}`,\r\n          'Content-Type': 'application/json'\r\n        })\r\n        if (isMount && updateResult)\r\n          dispatch({ type: 'successUpdate', data: updateResult.result})\r\n      } catch (e) {\r\n        dispatch({ type: 'failure', error: e.message })\r\n      }\r\n    }\r\n    if(state.isUpdating) {\r\n      console.log('updating')\r\n      console.log(JSON.stringify({story: state.newStory.value}))\r\n      updatePost()\r\n    }\r\n    \r\n    return () => {\r\n      setPageIsLoading(false)\r\n      isMount = false\r\n    }\r\n  }, [dispatch, auth.token, auth.userRole, sendRequest, state.isUpdating, state.newStory.value, setPageIsLoading, state.postToUpdate])\r\n\r\n\r\n  useEffect(() => {\r\n    setPageIsLoading(state.isLoading || state.isDeleting || state.isUpdating)\r\n  }, [setPageIsLoading, state.isLoading, state.isDeleting, state.isUpdating])\r\n  \r\n\r\n  return (\r\n    <>\r\n      {/* UI modals */}\r\n      {state.responseError &&\r\n        <Modal\r\n          modalClass='error'\r\n          header='Oops!!'\r\n          body={state.responseError}\r\n          dispatch={dispatch}\r\n          redirectTo='/'\r\n        />}\r\n      {/* UI modals */}\r\n      {state.deleteResult &&\r\n        <Modal\r\n          modalClass='success'\r\n          header='Success!!'\r\n          body={state.deleteResult}\r\n          dispatch={dispatch}\r\n          refresh={true}\r\n        />}\r\n      {/* UI modals */}\r\n      {state.editPost &&\r\n        <Modal\r\n          modalClass='edit'\r\n          header='Edit your adoption post story'\r\n          body={\r\n            <>\r\n              <p><b>Your post's old story:</b></p>\r\n              <p style={{color: 'darkcyan', overflowY: 'auto'}}>\"{state.oldStory}\"</p>\r\n              <p>{state.newStory.errorMsg && <InputError  style={{ top: '10%', margin: '.5rem' }} class='error-msg ' msg={state.newStory.errorMsg} />}</p>\r\n              <textarea \r\n              name=\"story\" \r\n              id=\"story\"\r\n              cols=\"35\" \r\n              rows=\"5\" \r\n              placeholder=\"New story for your post\"\r\n              value={state.newStory.value}\r\n              onChange={(e) => dispatch({ type: 'enterValue', field: 'newStory', value: e.currentTarget.value})}>\r\n              </textarea>\r\n              \r\n            </>\r\n          }\r\n          dispatch={dispatch}\r\n        />}\r\n      {state.updateResult &&\r\n      <Modal\r\n        modalClass='success'\r\n        header='Success!!'\r\n        body={state.updateResult}\r\n        dispatch={dispatch}\r\n        refresh={true}\r\n      />}\r\n      <h4>Adoption Posts Management</h4>\r\n      <div>\r\n        <div className=\"flex-col falign-center fjust-center \">\r\n          {openModal && <DeletePostModal closeModal={setOpenModal} dispatch={dispatch} />}\r\n        </div>\r\n\r\n\r\n        <Table className=\"my-table\">\r\n          <Thead>\r\n            <Tr>\r\n              <Th>\r\n                Post\r\n              </Th>\r\n              <Th>\r\n                Created At\r\n              </Th>\r\n              <Th>\r\n                Edit\r\n              </Th>\r\n              <Th>\r\n                Status\r\n              </Th>\r\n              <Th>\r\n                Delete\r\n              </Th>\r\n\r\n            </Tr>\r\n          </Thead>\r\n          <Tbody>\r\n\r\n            {state.responseData && state.responseData.map((adoptionAd, index) => {\r\n              return (\r\n                <Tr key={index}>\r\n                  <Td>\r\n                  {adoptionAd.status === 0 ? 'Removed' : \r\n                    <Link \r\n                    target={'_blank'}\r\n                    className=\"my-great-button\" to={`/adoptionad/${adoptionAd.id}`}>\r\n                      Click here to view\r\n                    </Link>}\r\n                    \r\n                  </Td>\r\n                  <Td>\r\n                    {dateFormat(adoptionAd.date, 'default')}\r\n                  </Td>\r\n                  <Td>\r\n                    {adoptionAd.status === 0 ? \"Can't Edit\" : <button \r\n                    id={index}\r\n                    ad_id={adoptionAd.id}\r\n                    onClick={(e) => {\r\n                      dispatch({ type: 'selectpostToUpdate', data: e.currentTarget.id, realId: e.currentTarget.getAttribute('ad_id')})                       \r\n                      dispatch({ type: 'editModalEnter' })\r\n                    }}\r\n                    className=\"my-great-button\">\r\n                      Click here to edit\r\n                    </button>}\r\n                    \r\n                  </Td>\r\n                  <Td style={{color: adoptionAd.status === 0 ? 'Green' : ''}}>\r\n                    {adoptionAd.status === 0 ? 'Found new home' : 'Looking for new owner'}\r\n                  </Td>\r\n                  <Td>\r\n                    {adoptionAd.status === 0 ? '-/-' : \r\n                    <button \r\n                    disabled={openModal}\r\n                    style={{ color: openModal ? 'grey' : '', cursor: openModal ? 'default' : 'pointer'}}\r\n                    className=\"my-great-button margin-bottom\"\r\n                      id={adoptionAd.id}\r\n                      onClick={(e) => { \r\n                        window.scrollTo(0,0) \r\n                        dispatch({ type: 'selectPostToDelete', data: e.currentTarget.id})                       \r\n                        setOpenModal(true)\r\n                       }}\r\n                    ><i className=\"fa-regular fa-trash-can\"></i></button>}\r\n                    \r\n                  </Td>\r\n\r\n                </Tr>\r\n              )\r\n            })}\r\n\r\n          </Tbody>\r\n\r\n\r\n\r\n        </Table>\r\n\r\n      </div>\r\n\r\n    </>\r\n\r\n\r\n  )\r\n}\r\n\r\nexport default MyAdoptionPosts","\r\nimport MyAdoptionPosts from '../../profile/myadoptionposts/MyAdoptionPosts';\r\n\r\nconst AdoptionPostsManagement = () => {\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      <MyAdoptionPosts />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AdoptionPostsManagement","\r\n\r\n// this custom hook contains the logic of sending a request to the server and getting databack, we wrap it with a useCallback so that it won't create the function every time the component using the hooks rerenders\r\n\r\nimport { useCallback } from \"react\"\r\n\r\nconst useFetch = () => {\r\n\r\n\r\n  const sendRequest = useCallback(async (\r\n    url,\r\n    method = 'GET',\r\n    body = null,\r\n    headers = {},\r\n\r\n\r\n  ) => {\r\n    try {\r\n      // 'Content-Type': 'application/json'\r\n      const response = await fetch(url, {\r\n      method,\r\n      headers,\r\n      body,\r\n    })\r\n      const parsedData = await response.json()\r\n  \r\n      if (!response.ok) {\r\n        throw new Error(parsedData.error)\r\n      }\r\n      return parsedData\r\n      \r\n    } catch (e) {\r\n      throw e\r\n    }\r\n    \r\n    \r\n  \r\n  \r\n  }, []) \r\n  return sendRequest\r\n}\r\nexport default useFetch","const modalMotion = {\r\n  initial: {\r\n    y: '-100vh',\r\n  },\r\n  final: {\r\n    y: 0,\r\n  },\r\n  exit: {\r\n    y: '-100vh'\r\n  }\r\n}\r\nexport default modalMotion","import { AnimatePresence, motion } from \"framer-motion\"\r\nimport { useState } from \"react\"\r\nimport modalMotion from \"./modalMotion\"\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst modalVariant = modalMotion\r\n\r\nconst Modal = (props) => {\r\n\r\n  const [show, setShow] = useState(true)\r\n  const navigate = useNavigate()\r\n  return (\r\n    <>\r\n      <div className={`modal modal_${props.modalClass}`}>\r\n        <AnimatePresence>\r\n          {show && <motion.div \r\n          variants={modalVariant}\r\n          initial='initial'\r\n          animate='final'\r\n          exit='exit'\r\n\r\n          className={`modal-container modal-container__${props.modalClass} flex-col gap-16p falign-center`}>\r\n\r\n            <header className={`modal-header modal-header__${props.modalClass}`}>\r\n              {props.header}\r\n            </header>\r\n            <div className={`flex-col gap-8p modal-body modal-body__${props.modalClass}`}>\r\n              {props.body}\r\n            </div>\r\n            <footer className={`modal-footer modal-footer__${props.modalClass}`}>\r\n            {(props.modalClass === 'check' || props.modalClass === 'edit') && \r\n                <button\r\n                onClick={() => {\r\n                  setShow(false)\r\n                  setTimeout(() => {props.dispatch({ type: 'finalConfirm' })}, 300)\r\n                  \r\n                }}\r\n                className='btn-rec modal-button modal-button__confirm'>Confirm </button>\r\n              }\r\n              <button\r\n                onClick={() => {\r\n                  setShow(false)\r\n                  if (props.refresh)\r\n                    return  setTimeout(() => {window.location.reload()}, 300)\r\n                  if (props.redirectTo)\r\n                    return setTimeout(() => {navigate(props.redirectTo)}, 300)\r\n                    \r\n                  setTimeout(() => {props.dispatch({ type: `${props.modalClass}ModalExit` })}, 300)\r\n                  \r\n                }}\r\n                className={`btn-rec modal-button modal-button__${props.modalClass}`}>{props.modalClass === 'success' ? 'OK' : props.modalClass === 'check' ? 'Cancel' :props.modalClass === 'edit' ? 'Cancel' : 'Exit'}</button>\r\n\r\n              \r\n              \r\n            </footer>\r\n\r\n          </motion.div>}\r\n        </AnimatePresence>\r\n\r\n\r\n      </div>\r\n    </>\r\n\r\n  )\r\n  // modalClass, header, body, modalButtonClass, modalType\r\n}\r\n\r\nexport default Modal","const InputError = (props) => {\r\n  return (\r\n    <span style={props.style} className={props.class}>{props.msg}</span>\r\n  )\r\n}\r\n\r\nexport default InputError","\r\nconst DeletePostModal = ({ closeModal, dispatch }) => {\r\n    return (\r\n        <div className=\"modal-background flex falign-center fjust-center\">\r\n            <div className=\"modal-container flex-col fgap-16p falign-center fjust-center\">\r\n                <div className=\"x-close\"><button\r\n                onClick={() => closeModal(false)}>\r\n                <i className=\"fa-solid fa-xmark\"></i></button></div>\r\n                <div className=\"modal-title\">\r\n                    Are you sure you want to delete?\r\n                </div>\r\n                <div className=\"flex-row edit-modal-buttons-container gap-24p fjust-center\">\r\n                    <button \r\n                    onClick={() => {\r\n                      closeModal(false)\r\n                      dispatch({ type: 'startDeleting' })\r\n                    }}\r\n                    className=\"btn-rec-purple\">Yes</button>\r\n                    <button onClick={() => closeModal(false)}\r\n                        className=\"btn-rec-purple\">No</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DeletePostModal"],"sourceRoot":""}