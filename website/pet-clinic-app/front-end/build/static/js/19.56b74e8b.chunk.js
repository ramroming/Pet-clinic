(this["webpackJsonppet-clinic-app"]=this["webpackJsonppet-clinic-app"]||[]).push([[19],{255:function(e,t,r){"use strict";r.r(t);var n=r(8),a=r.n(n),s=r(11),c=r(4),o=r(2),i=r(5),l=r(34),u=r(78),d=r(38),p=r(62),m=r(1),f=r(30),b=r(12),j=r(14),h=r(6),g=r(0),y=new Date,O=Object(l.a)(y,"isoDate"),v=Object(l.a)(y.setMonth(y.getMonth()-360),"isoDate"),x={pet_type:{value:"cat",errorMsg:""},name:{value:"",errorMsg:""},gender:{value:"male",errorMsg:""},birth_date:{value:O,errorMsg:""},photo:{value:"",url:"",errorMsg:""},breed_name:{value:"",errorMsg:""},missingInput:!1,isLoading:!1,responseData:null,responseError:"",isLoadingBreeds:!1,isLoadingColors:!1,breeds:[],colors:[],dataToSend:{},selectedColors:[]};t.default=function(){var e=Object(u.a)(x),t=Object(c.a)(e,2),r=t[0],n=t[1],l=Object(f.a)(n),y=Object(m.useContext)(b.a),w=Object(m.useContext)(h.a).setPageIsLoading,N=Object(j.a)(),M=Object(o.g)();Object(m.useEffect)((function(){var e=!0;e&&n({type:"getBreeds"});var t=function(){var t=Object(s.a)(a.a.mark((function t(){var s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l("".concat("https://pet-verse-app.herokuapp.com/","pets/breeds?pet_type=").concat(r.pet_type.value),"GET",null,{Authorization:"Bearer ".concat(y.token)});case 3:(s=t.sent)&&e&&n({type:"getBreedsSuccess",data:s}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e&&n({type:"failure",data:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){w(!1),e=!1}}),[r.pet_type,l,y.token,n,w]),Object(m.useEffect)((function(){var e=!0;e&&n({type:"getColors"});var t=function(){var t=Object(s.a)(a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l("".concat("https://pet-verse-app.herokuapp.com/","pets/colors"),"GET",null,{Authorization:"Bearer ".concat(y.token)});case 3:(r=t.sent)&&e&&n({type:"getColorsSuccess",data:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e&&n({type:"failure",data:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){w(!1),e=!1}}),[l,y.token,n,w]),Object(m.useEffect)((function(){var e=!0,t=function(){var t=Object(s.a)(a.a.mark((function t(){var s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l("".concat("https://pet-verse-app.herokuapp.com/","users/me/pets/"),"POST",r.dataToSend,{Authorization:"Bearer ".concat(y.token)});case 3:if(!(s=t.sent)||!e){t.next=9;break}if(n({type:"success",data:s}),null===M.state){t.next=8;break}return t.abrupt("return",N({redirectTo:M.state.from}));case 8:N({redirectTo:"/myprofile/petinfo"});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),e&&n({type:"failure",error:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return r.isLoading&&t(),function(){w(!1),e=!1}}),[r.isLoading,y.token,l,r.dataToSend,n,N,M.state,w]);Object(m.useEffect)((function(){w(r.isLoading||r.isLoadingBreeds)}),[r.isLoading,r.isLoadingBreeds,w]);return Object(g.jsx)("div",{className:"background-dark-blue",children:Object(g.jsxs)("div",{className:"main-container flex-row",children:[Object(g.jsxs)("form",{className:"form-container flex-col gap-16p falign-center",onSubmit:function(e){return function(e){e.preventDefault(),n({type:"validate"})}(e)},children:[Object(g.jsx)(i.b,{to:"/",className:"logo-link",children:Object(g.jsx)("img",{src:"/media/imgs/favicon.png",alt:"",className:"logo"})}),Object(g.jsxs)("div",{className:"input-wrapper flex-col gap-8p",children:[Object(g.jsx)("label",{className:"full-label",htmlFor:"type_name",children:"Select your pet:*"}),Object(g.jsxs)("div",{className:"flex-row fjust-evenly icons-wrapper",children:[r.pet_type.errorMsg&&Object(g.jsx)(d.a,{class:"error-msg",msg:r.pet_type.errorMsg}),Object(g.jsxs)("label",{onClick:function(){return n({type:"enterValue",value:"cat",field:"pet_type"})},children:[Object(g.jsx)("input",{className:"radio-img",type:"radio",name:"pet_type",id:"type_name",defaultChecked:!0}),Object(g.jsx)("img",{className:"pet-icon",src:"/media/imgs/cat-icon.png",alt:""})]}),Object(g.jsxs)("label",{onClick:function(){return n({type:"enterValue",value:"dog",field:"pet_type"})},children:[Object(g.jsx)("input",{className:"radio-img",type:"radio",name:"pet_type",id:"type_name"}),Object(g.jsx)("img",{className:"pet-icon",src:"/media/imgs/dog-icon.jpg",alt:""})]}),Object(g.jsxs)("label",{onClick:function(){return n({type:"enterValue",value:"bird",field:"pet_type"})},children:[Object(g.jsx)("input",{className:"radio-img",type:"radio",name:"pet_type",id:"type_name"}),Object(g.jsx)("img",{className:"pet-icon low-op",src:"/media/imgs/bird-icon.png",alt:""})]})]})]}),Object(g.jsxs)("div",{className:"input-wrapper flex-row fjust-between",children:[Object(g.jsx)("label",{className:"half-label",htmlFor:"name",children:"Pet Name:*"}),Object(g.jsx)("input",{onChange:function(e){return n({type:"enterValue",field:"name",value:e.currentTarget.value})},type:"text",name:"name",id:"name"})]}),Object(g.jsxs)("div",{className:"input-wrapper flex-col gap-8p",children:[Object(g.jsx)("label",{className:"half-label",htmlFor:"gender",children:"Pet Gender:*"}),Object(g.jsxs)("div",{className:"input-wrapper flex-row fjust-around",children:[Object(g.jsxs)("div",{onClick:function(){return n({type:"enterValue",field:"gender",value:"male"})},className:"flex-row radio-wrapper fjust-center gap-8p",children:[Object(g.jsx)("input",{type:"radio",name:"gender",id:"male",value:"male",defaultChecked:!0}),Object(g.jsx)("label",{htmlFor:"male",children:"Male"})]}),Object(g.jsxs)("div",{onClick:function(){return n({type:"enterValue",field:"gender",value:"female"})},className:"flex-row radio-wrapper fjust-center gap-8p",children:[Object(g.jsx)("input",{type:"radio",name:"gender",id:"female",value:"female"}),Object(g.jsx)("label",{htmlFor:"female",children:"Female"})]})]})]}),Object(g.jsxs)("div",{className:"input-wrapper flex-row fjust-between",children:[Object(g.jsx)("label",{className:"half-label",htmlFor:"birth_date",children:"Birth Date:*"}),Object(g.jsx)("input",{onChange:function(e){n({type:"enterValue",value:e.currentTarget.value,field:"birth_date"})},type:"date",name:"birth_date",id:"birth_date",value:r.birth_date.value,min:v,max:O})]}),Object(g.jsxs)("div",{className:"input-wrapper flex-row fjust-between",children:[r.photo.errorMsg&&Object(g.jsx)(d.a,{class:"error-msg",msg:r.photo.errorMsg}),Object(g.jsx)("label",{className:"half-label",children:"Photo:"}),Object(g.jsxs)("label",{htmlFor:"photo",className:"btn-r btn-r-outlined-blue flex-row fjust-between",children:["Press to upload",Object(g.jsx)("i",{className:"fas fa-upload"})]}),Object(g.jsx)("input",{onChange:function(e){if(0!==e.currentTarget.files.length)return n({type:"uploadPhoto",field:"photo",value:e.currentTarget.files[0],url:URL.createObjectURL(e.currentTarget.files[0])})},type:"file",name:"photo",id:"photo",accept:".png, .jpg, .jpeg"})]}),r.photo.url&&Object(g.jsx)(p.a,{fileURL:r.photo.url,fileName:r.photo.value.name,fileSize:Math.round(r.photo.value.size/1e3)}),Object(g.jsxs)("div",{className:"input-wrapper flex-row fjust-between",children:[Object(g.jsx)("label",{className:"half-label",htmlFor:"breed_name",children:"Select Breed:*"}),Object(g.jsxs)("select",{onChange:function(e){return n({type:"enterValue",field:"breed_name",value:e.currentTarget.value})},name:"breed_name",id:"breed_name",children:[Object(g.jsx)("option",{value:"",children:"Select a Breed"}),r.breeds&&r.breeds.map((function(e,t){return Object(g.jsx)("option",{value:e.name,children:e.name},t)}))]})]}),Object(g.jsx)("div",{className:" input-wrapper flex-row fjust-start",children:Object(g.jsx)("label",{className:"",children:"Select pet colors Max 3:"})}),Object(g.jsx)("div",{className:"input-wrapper flex-row",children:r.colors&&0!==r.colors.length&&!r.isLoadingColors&&r.selectedColors&&r.colors.map((function(e,t){return Object(g.jsx)("div",{className:0!==r.selectedColors.length&&r.selectedColors.includes(e.name)?"color-tag color-selected":"color-tag",children:Object(g.jsx)("p",{onClick:function(e){!function(e){n({type:"selectColor",color:e.target.innerHTML})}(e)},colorid:t,children:e.name})},t)}))}),r.missingInput&&Object(g.jsx)("p",{style:{color:"red",textAlign:"center",width:"70%",margin:"auto"},children:"Please Fill mandatory fields *"}),r.responseError&&Object(g.jsx)("p",{style:{color:"red",textAlign:"center",width:"70%",margin:"auto"},children:r.responseError}),Object(g.jsxs)("div",{className:"button-wrapper flex-row gap-8p fjust-center",children:[Object(g.jsx)("button",{type:"submit",className:"btn-r btn-r-dark",children:"Register Pet"}),Object(g.jsx)(i.b,{to:"/",className:"btn-r btn-r-purple",children:"Go to home page"})]})]}),Object(g.jsx)("div",{className:"split-screen-registerpet",children:Object(g.jsx)("img",{src:"/media/imgs/lovebirds.jpg",alt:""})})]})})}},27:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},30:function(e,t,r){"use strict";var n=r(8),a=r.n(n),s=r(11),c=r(1);t.a=function(){var e=Object(c.useCallback)(function(){var e=Object(s.a)(a.a.mark((function e(t){var r,n,s,c,o,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2&&void 0!==i[2]?i[2]:null,s=i.length>3&&void 0!==i[3]?i[3]:{},e.prev=3,e.next=6,fetch(t,{method:r,headers:s,body:n});case 6:return c=e.sent,e.next=9,c.json();case 9:if(o=e.sent,c.ok){e.next=12;break}throw new Error(o.error);case 12:return e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(3),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),[]);return e}},31:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(27);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},34:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,a=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,s=/[^-+\dA-Z]/g;function c(e,t,r,a){if(1!==arguments.length||"string"!==typeof e||/\d/.test(e)||(t=e,e=void 0),(e=e||0===e?e:new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var s=(t=String(o[t]||t||o.default)).slice(0,4);"UTC:"!==s&&"GMT:"!==s||(t=t.slice(4),r=!0,"GMT:"===s&&(a=!0));var c=function(){return r?"getUTC":"get"},f=function(){return e[c()+"Date"]()},b=function(){return e[c()+"Day"]()},j=function(){return e[c()+"Month"]()},h=function(){return e[c()+"FullYear"]()},g=function(){return e[c()+"Hours"]()},y=function(){return e[c()+"Minutes"]()},O=function(){return e[c()+"Seconds"]()},v=function(){return e[c()+"Milliseconds"]()},x=function(){return r?0:e.getTimezoneOffset()},w=function(){return d(e)},N=function(){return p(e)},M={d:function(){return f()},dd:function(){return l(f())},ddd:function(){return i.dayNames[b()]},DDD:function(){return u({y:h(),m:j(),d:f(),_:c(),dayName:i.dayNames[b()],short:!0})},dddd:function(){return i.dayNames[b()+7]},DDDD:function(){return u({y:h(),m:j(),d:f(),_:c(),dayName:i.dayNames[b()+7]})},m:function(){return j()+1},mm:function(){return l(j()+1)},mmm:function(){return i.monthNames[j()]},mmmm:function(){return i.monthNames[j()+12]},yy:function(){return String(h()).slice(2)},yyyy:function(){return l(h(),4)},h:function(){return g()%12||12},hh:function(){return l(g()%12||12)},H:function(){return g()},HH:function(){return l(g())},M:function(){return y()},MM:function(){return l(y())},s:function(){return O()},ss:function(){return l(O())},l:function(){return l(v(),3)},L:function(){return l(Math.floor(v()/10))},t:function(){return g()<12?i.timeNames[0]:i.timeNames[1]},tt:function(){return g()<12?i.timeNames[2]:i.timeNames[3]},T:function(){return g()<12?i.timeNames[4]:i.timeNames[5]},TT:function(){return g()<12?i.timeNames[6]:i.timeNames[7]},Z:function(){return a?"GMT":r?"UTC":m(e)},o:function(){return(x()>0?"-":"+")+l(100*Math.floor(Math.abs(x())/60)+Math.abs(x())%60,4)},p:function(){return(x()>0?"-":"+")+l(Math.floor(Math.abs(x())/60),2)+":"+l(Math.floor(Math.abs(x())%60),2)},S:function(){return["th","st","nd","rd"][f()%10>3?0:(f()%100-f()%10!=10)*f()%10]},W:function(){return w()},WW:function(){return l(w())},N:function(){return N()}};return t.replace(n,(function(e){return e in M?M[e]():e.slice(1,e.length-1)}))}var o={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},i={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(e).padStart(t,"0")},u=function(e){var t=e.y,r=e.m,n=e.d,a=e._,s=e.dayName,c=e.short,o=void 0!==c&&c,i=new Date,l=new Date;l.setDate(l[a+"Date"]()-1);var u=new Date;u.setDate(u[a+"Date"]()+1);return i[a+"FullYear"]()===t&&i[a+"Month"]()===r&&i[a+"Date"]()===n?o?"Tdy":"Today":l[a+"FullYear"]()===t&&l[a+"Month"]()===r&&l[a+"Date"]()===n?o?"Ysd":"Yesterday":u[a+"FullYear"]()===t&&u[a+"Month"]()===r&&u[a+"Date"]()===n?o?"Tmw":"Tomorrow":s},d=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);var n=t.getTimezoneOffset()-r.getTimezoneOffset();t.setHours(t.getHours()-n);var a=(t-r)/6048e5;return 1+Math.floor(a)},p=function(e){var t=e.getDay();return 0===t&&(t=7),t},m=function(e){return(String(e).match(a)||[""]).pop().replace(s,"").replace(/GMT\+0000/g,"UTC")}},38:function(e,t,r){"use strict";var n=r(0);t.a=function(e){return Object(n.jsx)("span",{style:e.style,className:e.class,children:e.msg})}},60:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(9);var a=r(7);function s(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},62:function(e,t,r){"use strict";var n=r(0);t.a=function(e){return Object(n.jsxs)("div",{className:"photo-info-wrapper flex-row gap-32p falign-center",children:[Object(n.jsx)("img",{src:e.fileURL,alt:"mini-upload-icon"}),Object(n.jsxs)("div",{className:"flex-col gap-8p",children:[Object(n.jsx)("p",{children:e.fileName}),Object(n.jsxs)("span",{children:[e.fileSize,"Kbytes"]})]})]})}},78:function(e,t,r){"use strict";var n=r(4),a=r(60),s=r(27),c=r(31),o=r(1),i=function(e,t){switch(t.type){case"enterValue":return Object(c.a)(Object(c.a)({},e),{},Object(s.a)({},t.field,Object(c.a)(Object(c.a)({},e[t.field]),{},{value:t.value})));case"uploadPhoto":return t.value.size>1e7?Object(c.a)(Object(c.a)({},e),{},Object(s.a)({},t.field,{value:"",url:"",errorMsg:"Image size is greater than 10Mb!"})):Object(c.a)(Object(c.a)({},e),{},Object(s.a)({},t.field,{value:t.value,url:t.url,errorMsg:""}));case"validate":if(e.isLoading)return e;if(!e.name.value||!e.breed_name.value||0===e.selectedColors.length)return Object(c.a)(Object(c.a)({},e),{},{missingInput:!0});if(t.withUserName&&!e.user_name.value)return Object(c.a)(Object(c.a)({},e),{},{missingInput:!0});if(e.photo.errorMsg)return Object(c.a)(Object(c.a)({},e),{},{missingInput:!1});var r=new FormData;return r.append("name",e.name.value),r.append("gender",e.gender.value),r.append("birth_date",e.birth_date.value),r.append("pet_type",e.pet_type.value),r.append("breed_name",e.breed_name.value),r.append("photo",e.photo.value),r.append("colors",e.selectedColors.join(":")),e.user_name&&r.append("user_name",e.user_name.value),Object(c.a)(Object(c.a)({},e),{},{dataToSend:r,isLoading:!0,missingInput:!1});case"success":return Object(c.a)(Object(c.a)({},e),{},{responseError:"",isLoading:!1,responseData:t.data});case"failure":return Object(c.a)(Object(c.a)({},e),{},{responseError:t.error,isLoading:!1,isLoadingBreeds:!1,isLoadingColors:!1});case"getBreeds":return Object(c.a)(Object(c.a)({},e),{},{isLoadingBreeds:!0,breeds:[],breed_name:Object(c.a)(Object(c.a)({},e.breed_name),{},{value:""})});case"getColors":return Object(c.a)(Object(c.a)({},e),{},{isLoadingColors:!0});case"getBreedsSuccess":return Object(c.a)(Object(c.a)({},e),{},{responseError:"",isLoadingBreeds:!1,breeds:t.data});case"getColorsSuccess":return Object(c.a)(Object(c.a)({},e),{},{responseError:"",isLoadingColors:!1,colors:t.data});case"selectColor":return-1!==e.selectedColors.indexOf(t.color)?Object(c.a)(Object(c.a)({},e),{},{selectedColors:e.selectedColors.filter((function(e){return e!==t.color}))}):3===e.selectedColors.length?e:Object(c.a)(Object(c.a)({},e),{},{selectedColors:[].concat(Object(a.a)(e.selectedColors),[t.color])})}};t.a=function(e){var t=Object(o.useReducer)(i,e),r=Object(n.a)(t,2);return[r[0],r[1]]}}}]);
//# sourceMappingURL=19.56b74e8b.chunk.js.map