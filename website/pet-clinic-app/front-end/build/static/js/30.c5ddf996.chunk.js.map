{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","components/shared/hooks/login-form-hook.js","components/pages/login/Login.js","components/shared/hooks/fetch-hook.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","formReducer","state","action","type","field","username","password","dataToSend","isLoading","missingInput","responseError","responseData","data","error","useLoginForm","initialState","useReducer","errorMsg","Login","dispatch","sendRequest","useFetch","auth","useContext","authContext","setPageIsLoading","pageLoadingContext","useEffect","isMount","fetchUser","a","console","log","process","JSON","stringify","parsedData","message","token","login","user","id","stmem_type","className","onSubmit","e","preventDefault","href","src","alt","htmlFor","onChange","currentTarget","name","style","color","textAlign","width","margin","to","useCallback","url","method","body","headers","fetch","response","json","ok","Error","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties"],"mappings":"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","file":"static/js/30.c5ddf996.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import { useReducer } from 'react'\r\n\r\n// This custom hook is currently adjusted to validate user inputs when login in using userReducer\r\nconst formReducer = (state, action) => {\r\n  switch (action.type) {\r\n\r\n    // ***************** Forms input validations *************************\r\n    case 'enterValue': {\r\n      return {\r\n        ...state,\r\n        [action.field]: {\r\n          ...state[action.field],\r\n          value: action.value\r\n        }\r\n      }\r\n    }\r\n\r\n    // validating when the Login is pressed\r\n    case 'validate': {\r\n\r\n\r\n      // incase of missing mandatory inputs\r\n      if (!state.username.value || !state.password.value)\r\n        return {\r\n          ...state,\r\n          missingInput: true\r\n        }\r\n      // incase of successfull validation\r\n      return {\r\n        ...state,\r\n        dataToSend: {\r\n          username: state.username.value,\r\n          password: state.password.value\r\n        },\r\n        isLoading: true,\r\n        missingInput: false\r\n      }\r\n    }\r\n    \r\n   \r\n\r\n    // *************** state management when using fetch *******************\r\n    \r\n    \r\n    // when fetching data is succeded \r\n    case 'success': {\r\n      return {\r\n        ...state,\r\n        responseError: '',\r\n        isLoading: false,\r\n        responseData: action.data\r\n      }\r\n    }\r\n\r\n    // when fetching data is failed\r\n    case 'failure': {\r\n      return {\r\n        ...state,\r\n        responseError: action.error,\r\n        isLoading: false\r\n      }\r\n    }\r\n\r\n\r\n    \r\n\r\n\r\n    default:\r\n      break\r\n  }\r\n}\r\n\r\nconst useLoginForm = (initialState) => {\r\n  const [state, dispatch] = useReducer(formReducer, initialState)\r\n  return [state, dispatch]\r\n}\r\nexport default useLoginForm","import { useEffect, useContext } from \"react\";\r\nimport useFetch from \"../../shared/hooks/fetch-hook\";\r\nimport useLoginForm from \"../../shared/hooks/login-form-hook\";\r\nimport { authContext } from \"../../shared/context/auth-context\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { pageLoadingContext } from \"../../shared/context/loading-context\";\r\n\r\nconst initialState = {\r\n  username: {\r\n    value: '',\r\n    errorMsg: ''\r\n  },\r\n  password: {\r\n    value: '',\r\n    errorMsg: ''\r\n  },\r\n  dataToSend: {},\r\n  isLoading: false,\r\n  missingInput: false,\r\n  responseError: '',\r\n  responseData: {}\r\n}\r\nconst Login = () => {\r\n\r\n  const submitForm = (event) => {\r\n    event.preventDefault()\r\n    dispatch({ type: 'validate' })\r\n  }\r\n\r\n\r\n  // use the form hook\r\n  const [state, dispatch] = useLoginForm(initialState)\r\n\r\n  // use the fetch hook\r\n  const sendRequest = useFetch(dispatch)\r\n\r\n  const auth = useContext(authContext)\r\n  const setPageIsLoading = useContext(pageLoadingContext).setPageIsLoading\r\n\r\n  \r\n  // useWhatChanged([state.isLoading, state.dataToSend, sendRequest, auth, state.responseData])\r\n\r\n  // if we have async operation inside use effect we have to wrap the operation with an async function inside the useeffect and then we should call the same function again inside the useEffect without using await\r\n  useEffect(() => {\r\n\r\n    let isMount = true\r\n    const fetchUser = async () => {\r\n      try {\r\n        console.log(process.env.REACT_APP_BACKEND_URL)\r\n        const parsedData = await sendRequest(\r\n          `${process.env.REACT_APP_BACKEND_URL}users/login`,\r\n          'POST',\r\n         JSON.stringify(state.dataToSend),\r\n         {\r\n          'Content-Type': 'application/json'\r\n        })  \r\n        if (parsedData && isMount)\r\n          dispatch({ type: 'success', data: parsedData})      \r\n      } catch (e) {\r\n        if (isMount)\r\n          dispatch({ type: 'failure', error: e.message })\r\n      }\r\n      \r\n      \r\n    }\r\n    // isLoading changes from false to true if the validation process  passed successfully \r\n    if (state.isLoading)\r\n      fetchUser()\r\n\r\n    return () => {\r\n      isMount = false\r\n      setPageIsLoading(false)\r\n\r\n    }\r\n  }, [state.isLoading, state.dataToSend, sendRequest, dispatch,  setPageIsLoading])\r\n\r\n  useEffect(() => {\r\n      setPageIsLoading(state.isLoading)\r\n  \r\n  }, [state.isLoading, setPageIsLoading])\r\n\r\n  // after data been fetched if we have a token inside the data that means the login was successfull so we login\r\n  useEffect(() => {\r\n    if (state.responseData.token)\r\n      auth.login(state.responseData.user.id, state.responseData.token, state.responseData.user.stmem_type)\r\n  }, [state.responseData, auth])\r\n\r\n    return (\r\n        <>\r\n            <div className=\"background-blue\">\r\n                <div className=\"main-container flex-row\">\r\n                    <form \r\n                    className=\"form-container flex-col gap-16p falign-center\" \r\n                    onSubmit={(e) => {\r\n                      submitForm(e)\r\n                    }}>\r\n\r\n                        <a className=\"logo-link\" href=\"/#\">\r\n                            <img src=\"/media/imgs/favicon.png\" alt=\"\" className=\"logo\"/>\r\n                        </a>\r\n\r\n\r\n                        <div className=\"input-wrapper flex-row fjust-between\">\r\n                            <label className=\"half-label\" htmlFor=\"username\">Username:\r\n                            </label>\r\n                            <input\r\n                            onChange={(e) => {\r\n                              dispatch({type: 'enterValue', field: 'username',value: e.currentTarget.value})\r\n                            }} \r\n                            type=\"text\" name=\"username\" id=\"username\"/>\r\n                        </div>\r\n\r\n\r\n                        <div className=\"input-wrapper flex-row fjust-between\">\r\n                            <label className=\"half-label\" htmlFor=\"password\">Password:\r\n                            </label>\r\n                            <input\r\n                            onChange={(e) => {\r\n                              dispatch({type: 'enterValue', field: 'password', value: e.currentTarget.value})\r\n                            }} \r\n                            type=\"password\" name=\"password\" id=\"password\"/>\r\n\r\n                        </div>\r\n\r\n                        {state.missingInput && <p style={{ color: 'red', textAlign: 'center', width: '70%', margin: 'auto' }}>Username and Password cannot be empty!</p>}\r\n                        {state.responseError && <p style={{ color: 'red', textAlign: 'center', width: '70%', margin: 'auto' }}>{state.responseError}</p>}\r\n\r\n                        <div className=\"button-wrapper flex-row gap-8p fjust-center\">\r\n\r\n                            <button type=\"submit\" className={state.isLoading ? \"btn-r btn-r-dark disabled\" : \"btn-r btn-r-dark\"}>\r\n                                Login\r\n                            </button>\r\n\r\n                            <Link to='/signup' className=\"btn-r btn-r-dark\" >\r\n                            Not a member?\r\n                            </Link>\r\n                            <a href=\"/#\" className=\"btn-r btn-r-purple\">\r\n                                Forgot your password?</a>\r\n\r\n                        </div>\r\n\r\n                    </form>\r\n\r\n                    <div className=\"split-screen-login\">\r\n                        <img src=\"/media/imgs/dog2.jpg\" alt=\"\"/>\r\n                    </div>\r\n\r\n\r\n                </div>\r\n            </div>\r\n\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n","\r\n\r\n// this custom hook contains the logic of sending a request to the server and getting databack, we wrap it with a useCallback so that it won't create the function every time the component using the hooks rerenders\r\n\r\nimport { useCallback } from \"react\"\r\n\r\nconst useFetch = () => {\r\n\r\n\r\n  const sendRequest = useCallback(async (\r\n    url,\r\n    method = 'GET',\r\n    body = null,\r\n    headers = {},\r\n\r\n\r\n  ) => {\r\n    try {\r\n      // 'Content-Type': 'application/json'\r\n      const response = await fetch(url, {\r\n      method,\r\n      headers,\r\n      body,\r\n    })\r\n      const parsedData = await response.json()\r\n  \r\n      if (!response.ok) {\r\n        throw new Error(parsedData.error)\r\n      }\r\n      return parsedData\r\n      \r\n    } catch (e) {\r\n      throw e\r\n    }\r\n    \r\n    \r\n  \r\n  \r\n  }, []) \r\n  return sendRequest\r\n}\r\nexport default useFetch","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}"],"sourceRoot":""}