(this["webpackJsonppet-clinic-app"]=this["webpackJsonppet-clinic-app"]||[]).push([[30],{27:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},276:function(e,t,r){"use strict";r.r(t);var n=r(8),a=r.n(n),s=r(11),c=r(4),o=r(1),i=r(30),u=r(27),l=r(31),p=function(e,t){switch(t.type){case"enterValue":return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},t.field,Object(l.a)(Object(l.a)({},e[t.field]),{},{value:t.value})));case"validate":return e.username.value&&e.password.value?Object(l.a)(Object(l.a)({},e),{},{dataToSend:{username:e.username.value,password:e.password.value},isLoading:!0,missingInput:!1}):Object(l.a)(Object(l.a)({},e),{},{missingInput:!0});case"success":return Object(l.a)(Object(l.a)({},e),{},{responseError:"",isLoading:!1,responseData:t.data});case"failure":return Object(l.a)(Object(l.a)({},e),{},{responseError:t.error,isLoading:!1})}},b=function(e){var t=Object(o.useReducer)(p,e),r=Object(c.a)(t,2);return[r[0],r[1]]},d=r(12),j=r(5),f=r(6),O=r(0),m={username:{value:"",errorMsg:""},password:{value:"",errorMsg:""},dataToSend:{},isLoading:!1,missingInput:!1,responseError:"",responseData:{}};t.default=function(){var e=b(m),t=Object(c.a)(e,2),r=t[0],n=t[1],u=Object(i.a)(n),l=Object(o.useContext)(d.a),p=Object(o.useContext)(f.a).setPageIsLoading;return Object(o.useEffect)((function(){var e=!0,t=function(){var t=Object(s.a)(a.a.mark((function t(){var s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("https://pet-verse-app.herokuapp.com/"),t.next=4,u("".concat("https://pet-verse-app.herokuapp.com/","users/login"),"POST",JSON.stringify(r.dataToSend),{"Content-Type":"application/json"});case 4:(s=t.sent)&&e&&n({type:"success",data:s}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e&&n({type:"failure",error:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return r.isLoading&&t(),function(){e=!1,p(!1)}}),[r.isLoading,r.dataToSend,u,n,p]),Object(o.useEffect)((function(){p(r.isLoading)}),[r.isLoading,p]),Object(o.useEffect)((function(){r.responseData.token&&l.login(r.responseData.user.id,r.responseData.token,r.responseData.user.stmem_type)}),[r.responseData,l]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"background-blue",children:Object(O.jsxs)("div",{className:"main-container flex-row",children:[Object(O.jsxs)("form",{className:"form-container flex-col gap-16p falign-center",onSubmit:function(e){e.preventDefault(),n({type:"validate"})},children:[Object(O.jsx)("a",{className:"logo-link",href:"/#",children:Object(O.jsx)("img",{src:"/media/imgs/favicon.png",alt:"",className:"logo"})}),Object(O.jsxs)("div",{className:"input-wrapper flex-row fjust-between",children:[Object(O.jsx)("label",{className:"half-label",htmlFor:"username",children:"Username:"}),Object(O.jsx)("input",{onChange:function(e){n({type:"enterValue",field:"username",value:e.currentTarget.value})},type:"text",name:"username",id:"username"})]}),Object(O.jsxs)("div",{className:"input-wrapper flex-row fjust-between",children:[Object(O.jsx)("label",{className:"half-label",htmlFor:"password",children:"Password:"}),Object(O.jsx)("input",{onChange:function(e){n({type:"enterValue",field:"password",value:e.currentTarget.value})},type:"password",name:"password",id:"password"})]}),r.missingInput&&Object(O.jsx)("p",{style:{color:"red",textAlign:"center",width:"70%",margin:"auto"},children:"Username and Password cannot be empty!"}),r.responseError&&Object(O.jsx)("p",{style:{color:"red",textAlign:"center",width:"70%",margin:"auto"},children:r.responseError}),Object(O.jsxs)("div",{className:"button-wrapper flex-row gap-8p fjust-center",children:[Object(O.jsx)("button",{type:"submit",className:r.isLoading?"btn-r btn-r-dark disabled":"btn-r btn-r-dark",children:"Login"}),Object(O.jsx)(j.b,{to:"/signup",className:"btn-r btn-r-dark",children:"Not a member?"}),Object(O.jsx)("a",{href:"/#",className:"btn-r btn-r-purple",children:"Forgot your password?"})]})]}),Object(O.jsx)("div",{className:"split-screen-login",children:Object(O.jsx)("img",{src:"/media/imgs/dog2.jpg",alt:""})})]})})})}},30:function(e,t,r){"use strict";var n=r(8),a=r.n(n),s=r(11),c=r(1);t.a=function(){var e=Object(c.useCallback)(function(){var e=Object(s.a)(a.a.mark((function e(t){var r,n,s,c,o,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2&&void 0!==i[2]?i[2]:null,s=i.length>3&&void 0!==i[3]?i[3]:{},e.prev=3,e.next=6,fetch(t,{method:r,headers:s,body:n});case 6:return c=e.sent,e.next=9,c.json();case 9:if(o=e.sent,c.ok){e.next=12;break}throw new Error(o.error);case 12:return e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(3),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),[]);return e}},31:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(27);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}}}]);
//# sourceMappingURL=30.c5ddf996.chunk.js.map