(this["webpackJsonppet-clinic-app"]=this["webpackJsonppet-clinic-app"]||[]).push([[21],{27:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},279:function(e,t,r){"use strict";r.r(t);var n=r(8),a=r.n(n),s=r(11),c=r(4),o=r(27),i=r(31),l=r(1),u=r.n(l),p=function(e,t){switch(t.type){case"enterValue":return t.value.length>400?Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},t.field,Object(i.a)(Object(i.a)({},e[t.field]),{},{error:"Max Characters length is 400 !!"}))):Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},t.field,{error:"",value:t.value}));case"start":return Object(i.a)(Object(i.a)({},e),{},{responseError:"",isLoading:!0});case"success":return Object(i.a)(Object(i.a)({},e),{},{responseError:"",isLoading:!1,responseData:t.data});case"successCreate":return Object(i.a)(Object(i.a)({},e),{},{responseError:"",isCreating:!1,responseCreate:t.data});case"failure":return Object(i.a)(Object(i.a)({},e),{},{responseError:t.error,isLoading:!1,isCreating:!1});case"validate":return e.story.value?Object(i.a)(Object(i.a)({},e),{},{isCreating:!0,missingStory:"",responseError:""}):Object(i.a)(Object(i.a)({},e),{},{missingStory:"Please fill a story about your pet"});case"errorModalExit":return Object(i.a)(Object(i.a)({},e),{},{responseError:""})}},d=function(e){var t=Object(l.useReducer)(p,e),r=Object(c.a)(t,2);return[r[0],r[1]]},j=r(30),f=r(2),b=r(12),m=r(6),h=r(5),O=r(38),x=r(33),v=r(0),g={isLoading:!1,isCreating:!1,responseData:{},responseError:"",story:{value:"",error:""},missingStory:"",responseCreate:""};t.default=function(){var e=Object(f.i)().id,t=d(g),r=Object(c.a)(t,2),n=r[0],o=r[1],i=Object(j.a)(),p=Object(l.useContext)(b.a),y=Object(l.useContext)(m.a).setPageIsLoading;Object(l.useEffect)((function(){var t=!0,r=function(){var r=Object(s.a)(a.a.mark((function r(){var n,s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t&&o({type:"start"}),r.prev=1,n="".concat("receptionist"===p.userRole||"admin"===p.userRole?"".concat("https://pet-verse-app.herokuapp.com/","receptionist/shelterpet/").concat(e):"".concat("https://pet-verse-app.herokuapp.com/","users/me/pets/").concat(e)),r.next=5,i(n,"GET",null,{Authorization:"Bearer ".concat(p.token)});case 5:(s=r.sent)&&t&&o({type:"success",data:s}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),t&&o({type:"failure",error:r.t0.message});case 12:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(){return r.apply(this,arguments)}}();return r(),function(){t=!1}}),[p.token,p.userRole,o,e,i]),Object(l.useEffect)((function(){y(n.isLoading)}),[n.isLoading,y]),Object(l.useEffect)((function(){var t=!0;t&&y(n.isCreating);var r=function(){var r=Object(s.a)(a.a.mark((function r(){var s,c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s="".concat("receptionist"===p.userRole||"admin"===p.userRole?"".concat("https://pet-verse-app.herokuapp.com/","receptionist/adoptionads"):"".concat("https://pet-verse-app.herokuapp.com/","users/me/adoptionads/")),r.next=4,i(s,"POST",JSON.stringify({pet_id:e,story:n.story.value}),{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)});case 4:(c=r.sent)&&t&&o({type:"successCreate",data:c}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),t&&o({type:"failure",error:r.t0.message});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(){return r.apply(this,arguments)}}();return n.isCreating&&r(),function(){y(!1),t=!1}}),[n.isCreating,y,p.token,p.userRole,o,e,i,n.story]);return Object(v.jsxs)(v.Fragment,{children:[n.responseError&&Object(v.jsx)(x.a,{modalClass:"error",header:"Oops!!",body:n.responseError,dispatch:o}),n.responseCreate&&Object(v.jsx)(x.a,{modalClass:"success",header:"Success!!",body:n.responseCreate.response,dispatch:o,redirectTo:"/adoptionad/".concat(n.responseCreate.ad_id)}),Object(v.jsxs)("div",{className:" adoption-ad-wrapper home-container flex-col falign-center gap-24p ",children:[Object(v.jsx)("p",{className:"post-review-header",children:"This is a preview of how your adoption ad would be viewed by others"}),!n.responseData.shelter_id&&Object(v.jsxs)("p",{className:"post-review-header-small",children:["The info here is retrieved from your pet's profile, you can edit the info from",Object(v.jsx)(h.b,{className:"link",target:"blank",to:"/myprofile/petinfo",children:" here "}),":).",Object(v.jsx)("br",{}),"feel free to provide more details in the pet's story box!"]}),Object(v.jsxs)("div",{className:"pet-basic-info-wrapper flex-col falign-center fjust-center gap-24p",children:[Object(v.jsxs)("div",{className:" wrapper flex-col falign-center fjust-center gap-16p",children:[Object(v.jsxs)("div",{className:"intro flex-col falign-center fjust-center gap-16p",children:[Object(v.jsx)("p",{className:"intro-hi",children:"hi i'm"}),Object(v.jsx)("p",{className:"pet-name",children:n.responseData.pet_name&&n.responseData.pet_name}),Object(v.jsxs)("p",{className:"pet-breed",children:["Breed: ",n.responseData.breed_name&&n.responseData.breed_name]})]}),Object(v.jsxs)("div",{className:"pet-info flex-col gap-16p",children:[Object(v.jsxs)("div",{className:"flex-row gap-8p",children:[Object(v.jsx)("label",{children:"Age: "}),Object(v.jsx)("p",{children:n.responseData.birth_date&&n.responseData.birth_date})]}),Object(v.jsxs)("div",{className:"flex-row gap-8p",children:[Object(v.jsx)("label",{children:"Gender: "}),Object(v.jsx)("p",{children:n.responseData.gender&&n.responseData.gender})]}),Object(v.jsxs)("div",{className:"flex-row gap-8p",children:[Object(v.jsx)("label",{children:"Color: "}),n.responseData.colors&&Object(v.jsx)("p",{children:n.responseData.colors})]}),Object(v.jsxs)("div",{className:"flex-row gap-8p",children:[Object(v.jsx)("label",{children:"Located At: "}),Object(v.jsx)("p",{children:n.responseData.shelter_id?"The shelter":"Owner house"})]})]})]}),Object(v.jsx)("div",{className:"flex-col fjust-center falign-center pet-image-container",children:n.responseData.photo?Object(v.jsx)("img",{src:URL.createObjectURL(new Blob([new Uint8Array(n.responseData.photo.data)])),alt:"pet"}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("img",{src:"/media/imgs/nophotopet.jpg",alt:"pet"}),Object(v.jsx)(h.b,{target:"blank",to:"/myprofile/petinfo",className:"btn-rec adopt-btn special",children:"Dont forget to add a photo for your pet!"})]})})]}),Object(v.jsxs)("div",{className:"pet-story flex-col gap-16p",children:[Object(v.jsxs)("div",{className:"adopt-story flex-col",children:[Object(v.jsx)("h2",{children:"My story"}),n.story.error&&Object(v.jsx)(O.a,{direction:"bottom",style:{top:"50%",margin:".5rem"},class:"error-msg",msg:n.story.error}),Object(v.jsx)("textarea",{className:"story-textarea",placeholder:"example: Looking for a cute, energetic little kitten? Come meet me and see if I'm the one for you!...",value:n.story.value,onChange:function(e){return o({type:"enterValue",value:e.currentTarget.value,field:"story"})}}),n.missingStory&&Object(v.jsx)("p",{style:{color:"red",textAlign:"center",width:"70%",margin:"auto",padding:"0.5rem"},children:n.missingStory}),Object(v.jsx)("input",{onClick:function(){o({type:"validate"})},className:"btn-rec-purple",type:"submit"})]}),Object(v.jsx)("div",{className:"training-story flex-col gap-8p",children:n.responseData.trainings&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("h2",{children:["My trainings ",Object(v.jsx)("i",{className:"fas fa-medal"})]}),0===n.responseData.trainings.length?Object(v.jsx)("p",{children:"No Previous trainings for this pet "}):n.responseData.trainings.map((function(e,t){return Object(v.jsxs)(u.a.Fragment,{children:[Object(v.jsxs)("div",{className:"flex-row gap-8p",children:[Object(v.jsx)("label",{children:"Training: "}),Object(v.jsx)("p",{children:e.training})]}),Object(v.jsxs)("div",{className:"flex-row gap-8p",children:[Object(v.jsx)("label",{children:"Trained by: "}),Object(v.jsx)("p",{children:e.trainer_first_name+" "+e.trainer_last_name})]}),Object(v.jsx)("br",{})]},t)}))]})})]})]})]})}},30:function(e,t,r){"use strict";var n=r(8),a=r.n(n),s=r(11),c=r(1);t.a=function(){var e=Object(c.useCallback)(function(){var e=Object(s.a)(a.a.mark((function e(t){var r,n,s,c,o,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2&&void 0!==i[2]?i[2]:null,s=i.length>3&&void 0!==i[3]?i[3]:{},e.prev=3,e.next=6,fetch(t,{method:r,headers:s,body:n});case 6:return c=e.sent,e.next=9,c.json();case 9:if(o=e.sent,c.ok){e.next=12;break}throw new Error(o.error);case 12:return e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(3),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),[]);return e}},31:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(27);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},33:function(e,t,r){"use strict";var n=r(4),a=r(55),s=r(267),c=r(1),o={initial:{y:"-100vh"},final:{y:0},exit:{y:"-100vh"}},i=r(2),l=r(0),u=o;t.a=function(e){var t=Object(c.useState)(!0),r=Object(n.a)(t,2),o=r[0],p=r[1],d=Object(i.h)();return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"modal modal_".concat(e.modalClass),children:Object(l.jsx)(a.a,{children:o&&Object(l.jsxs)(s.a.div,{variants:u,initial:"initial",animate:"final",exit:"exit",className:"modal-container modal-container__".concat(e.modalClass," flex-col gap-16p falign-center"),children:[Object(l.jsx)("header",{className:"modal-header modal-header__".concat(e.modalClass),children:e.header}),Object(l.jsx)("div",{className:"flex-col gap-8p modal-body modal-body__".concat(e.modalClass),children:e.body}),Object(l.jsxs)("footer",{className:"modal-footer modal-footer__".concat(e.modalClass),children:[("check"===e.modalClass||"edit"===e.modalClass)&&Object(l.jsx)("button",{onClick:function(){p(!1),setTimeout((function(){e.dispatch({type:"finalConfirm"})}),300)},className:"btn-rec modal-button modal-button__confirm",children:"Confirm "}),Object(l.jsx)("button",{onClick:function(){return p(!1),e.refresh?setTimeout((function(){window.location.reload()}),300):e.redirectTo?setTimeout((function(){d(e.redirectTo)}),300):void setTimeout((function(){e.dispatch({type:"".concat(e.modalClass,"ModalExit")})}),300)},className:"btn-rec modal-button modal-button__".concat(e.modalClass),children:"success"===e.modalClass?"OK":"check"===e.modalClass||"edit"===e.modalClass?"Cancel":"Exit"})]})]})})})})}},38:function(e,t,r){"use strict";var n=r(0);t.a=function(e){return Object(n.jsx)("span",{style:e.style,className:e.class,children:e.msg})}},55:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(24),a=r(1),s=r(40);var c=r(37),o=r(39),i=0;function l(){var e=i;return i++,e}var u=function(e){var t=e.children,r=e.initial,n=e.isPresent,s=e.onExitComplete,i=e.custom,u=e.presenceAffectsLayout,d=Object(o.a)(p),j=Object(o.a)(l),f=Object(a.useMemo)((function(){return{id:j,initial:r,isPresent:n,custom:i,onExitComplete:function(e){d.set(e,!0);var t=!0;d.forEach((function(e){e||(t=!1)})),t&&(null===s||void 0===s||s())},register:function(e){return d.set(e,!1),function(){return d.delete(e)}}}}),u?void 0:[n]);return Object(a.useMemo)((function(){d.forEach((function(e,t){return d.set(t,!1)}))}),[n]),a.useEffect((function(){!n&&!d.size&&(null===s||void 0===s||s())}),[n]),a.createElement(c.a.Provider,{value:f},t)};function p(){return new Map}var d=r(45);function j(e){return e.key||""}var f=function(e){var t=e.children,r=e.custom,c=e.initial,o=void 0===c||c,i=e.onExitComplete,l=e.exitBeforeEnter,p=e.presenceAffectsLayout,f=void 0===p||p,b=function(){var e=Object(a.useRef)(!1),t=Object(n.c)(Object(a.useState)(0),2),r=t[0],c=t[1];return Object(s.a)((function(){return e.current=!0})),Object(a.useCallback)((function(){!e.current&&c(r+1)}),[r])}(),m=Object(a.useContext)(d.b);Object(d.c)(m)&&(b=m.forceUpdate);var h=Object(a.useRef)(!0),O=function(e){var t=[];return a.Children.forEach(e,(function(e){Object(a.isValidElement)(e)&&t.push(e)})),t}(t),x=Object(a.useRef)(O),v=Object(a.useRef)(new Map).current,g=Object(a.useRef)(new Set).current;if(function(e,t){e.forEach((function(e){var r=j(e);t.set(r,e)}))}(O,v),h.current)return h.current=!1,a.createElement(a.Fragment,null,O.map((function(e){return a.createElement(u,{key:j(e),isPresent:!0,initial:!!o&&void 0,presenceAffectsLayout:f},e)})));for(var y=Object(n.e)([],Object(n.c)(O)),C=x.current.map(j),w=O.map(j),E=C.length,k=0;k<E;k++){var N=C[k];-1===w.indexOf(N)?g.add(N):g.delete(N)}return l&&g.size&&(y=[]),g.forEach((function(e){if(-1===w.indexOf(e)){var t=v.get(e);if(t){var n=C.indexOf(e);y.splice(n,0,a.createElement(u,{key:j(t),isPresent:!1,onExitComplete:function(){v.delete(e),g.delete(e);var t=x.current.findIndex((function(t){return t.key===e}));x.current.splice(t,1),g.size||(x.current=O,b(),i&&i())},custom:r,presenceAffectsLayout:f},t))}}})),y=y.map((function(e){var t=e.key;return g.has(t)?e:a.createElement(u,{key:j(e),isPresent:!0,presenceAffectsLayout:f},e)})),x.current=y,a.createElement(a.Fragment,null,g.size?y:y.map((function(e){return Object(a.cloneElement)(e)})))}}}]);
//# sourceMappingURL=21.d656cff5.chunk.js.map