(this["webpackJsonppet-clinic-app"]=this["webpackJsonppet-clinic-app"]||[]).push([[37],{271:function(e,t,a){"use strict";a.r(t);var n=a(8),i=a.n(n),r=a(11),s=a(4),c=a(1),d=a(44),l=(a(54),a(0)),u=function(e){var t=e.dispatch,a=e.state;return Object(l.jsx)("div",{className:"update-modal-background flex falign-center fjust-center",children:Object(l.jsxs)("div",{className:"modal-container flex-col fgap-16p falign-center",children:[Object(l.jsx)("div",{className:"x-close",children:Object(l.jsx)("button",{onClick:function(){return t({type:"updateModal",data:!1})},children:Object(l.jsx)("i",{className:"fa-solid fa-xmark"})})}),Object(l.jsx)("div",{className:"modal-title",children:"Update Training History:"}),Object(l.jsxs)("form",{className:"flex-col falign-center fjust-center\r gap-16p",children:[Object(l.jsxs)("div",{className:"update-style flex-row fjust-between falign-center gap-16p",children:[Object(l.jsx)("label",{children:"Training:"}),Object(l.jsxs)("select",{value:a.trainingTypeId,onChange:function(e){t({type:"enterValue",data:e.currentTarget.value,field:"trainingTypeId"})},children:[Object(l.jsx)("option",{value:"0",children:"Select Training"}),a.trainingTypes&&a.trainingTypes.map((function(e,t){return Object(l.jsx)("option",{value:e.id,children:e.name},t)}))]})]}),Object(l.jsxs)("div",{className:"update-style flex-row fjust-between falign-center gap-16p",children:[Object(l.jsx)("label",{children:"Start date:"}),Object(l.jsx)("input",{type:"date",value:a.startDate,onChange:function(e){t({type:"enterDate",data:e.currentTarget.value,field:"startDate"})}})]}),Object(l.jsxs)("div",{className:"update-style flex-row fjust-between falign-center gap-16p",children:[Object(l.jsx)("label",{children:"End date:"}),Object(l.jsx)("input",{type:"date",min:a.minDate,value:a.endDate,onChange:function(e){t({type:"enterDate",data:e.currentTarget.value,field:"endDate"})}})]})]}),Object(l.jsxs)("div",{className:"add-treatment-button-container flex-row gap-24p fjust-center",children:[a.missingInput&&Object(l.jsx)("p",{style:{color:"red",textAlign:"center",width:"70%",margin:"auto",marginTop:"1rem"},children:"Please Select all necessary fields "}),Object(l.jsx)("button",{disabled:a.isUpdatingTraining,onClick:function(){t({type:"startUpdating"})},className:"btn-rec-purple",children:"Update"})]})]})})},o=function(e){var t=e.dispatch,a=e.state;return Object(l.jsx)("div",{className:"add-modal-background flex falign-center fjust-center",children:Object(l.jsxs)("div",{className:"modal-container flex-col fgap-16p falign-center",children:[Object(l.jsx)("div",{className:"x-close",children:Object(l.jsx)("button",{onClick:function(){a.isSavingTraining||t({type:"addModal",data:!1})},children:Object(l.jsx)("i",{className:"fa-solid fa-xmark"})})}),Object(l.jsx)("div",{className:"modal-title",children:"Add new Training:"}),Object(l.jsxs)("form",{className:"flex-col falign-center fjust-center\r gap-16p",children:[Object(l.jsxs)("div",{className:"update-style flex-row fjust-between falign-center gap-16p",children:[Object(l.jsx)("label",{children:"Training:"}),Object(l.jsxs)("select",{value:a.trainingTypeId,onChange:function(e){t({type:"enterValue",data:e.currentTarget.value,field:"trainingTypeId"})},children:[Object(l.jsx)("option",{value:"0",children:"Select Training"}),a.trainingTypes&&a.trainingTypes.map((function(e,t){return Object(l.jsx)("option",{value:e.id,children:e.name},t)}))]})]}),Object(l.jsxs)("div",{className:"update-style flex-row fjust-between falign-center gap-16p",children:[Object(l.jsx)("label",{children:"Start date:"}),Object(l.jsx)("input",{type:"date",value:a.startDate,onChange:function(e){t({type:"enterDate",data:e.currentTarget.value,field:"startDate"})}})]}),Object(l.jsxs)("div",{className:"update-style flex-row fjust-between falign-center gap-16p",children:[Object(l.jsx)("label",{children:"End date:"}),Object(l.jsx)("input",{type:"date",min:a.minDate,value:a.endDate,onChange:function(e){t({type:"enterDate",data:e.currentTarget.value,field:"endDate"})}})]})]}),Object(l.jsxs)("div",{className:"add-treatment-button-container flex-row gap-24p fjust-center",children:[a.missingInput&&Object(l.jsx)("p",{style:{color:"red",textAlign:"center",width:"70%",margin:"auto",marginTop:"1rem"},children:"Please Select all necessary fields "}),Object(l.jsx)("button",{onClick:function(){a.isSavingTraining||t({type:"startTraining"})},className:"btn-rec-purple",children:"Save"})]})]})})},p=a(2),g=a(12),j=a(6),b=a(30),T=a(27),m=a(31),O=a(34),f=function(e,t){var a;switch(t.type){case"updateModal":return!1===t.data?Object(m.a)(Object(m.a)({},e),{},{updateTrainingModal:t.data,TrainingId:0,trainingTypeId:0,missingInput:!1,startDate:Object(O.a)(new Date,"UTC:yyyy-mm-dd"),endDate:Object(O.a)(new Date((new Date).setUTCHours((new Date).getUTCHours()+24)),"UTC:yyyy-mm-dd"),minDate:Object(O.a)(new Date((new Date).setUTCHours((new Date).getUTCHours()+24)),"UTC:yyyy-mm-dd")}):Object(m.a)(Object(m.a)({},e),{},{missingInput:!1,updateTrainingModal:t.data,addTrainingModal:!1,trainingId:t.trainingId,startDate:Object(O.a)(t.trObj.start_date,"UTC:yyyy-mm-dd"),endDate:Object(O.a)(t.trObj.end_date,"UTC:yyyy-mm-dd"),minDate:Object(O.a)(new Date(new Date(t.trObj.start_date).setUTCHours((new Date).getUTCHours()+24)),"UTC:yyyy-mm-dd"),trainingTypeId:t.trObj.training_type_id});case"addModal":return Object(m.a)(Object(m.a)({},e),{},{addTrainingModal:t.data,updateTrainingModal:!1,trainingTypeId:0,missingInput:!1});case"getTrainingsSuccess":return Object(m.a)(Object(m.a)({},e),{},{isGettingTrainings:!1,trainings:t.data});case"getTrainingsFailure":return Object(m.a)(Object(m.a)({},e),{},{isGettingTrainings:!1,getTrainingsFailure:t.error});case"getTrainingTypesSuccess":return Object(m.a)(Object(m.a)({},e),{},{isGettingTrainingTypes:!1,trainingTypes:t.data});case"getTrainingTypesFailure":return Object(m.a)(Object(m.a)({},e),{},{isGettingTrainingTypes:!1,getTrainingTypesFailure:t.error});case"getReset":return{isGettingTrainings:!1};case"prepareAddTraining":return Object(m.a)(Object(m.a)({},e),{},{appId:t.data.appId,petId:t.data.petId});case"enterValue":return Object(m.a)(Object(m.a)({},e),{},Object(T.a)({},t.field,parseInt(t.data)));case"enterDate":return"startDate"===t.field?Object(m.a)(Object(m.a)({},e),{},(a={},Object(T.a)(a,t.field,t.data),Object(T.a)(a,"minDate",Object(O.a)(new Date(new Date(t.data).setUTCHours((new Date).getUTCHours()+24)),"UTC:yyyy-mm-dd")),Object(T.a)(a,"endDate",Object(O.a)(new Date(new Date(t.data).setUTCHours((new Date).getUTCHours()+24)),"UTC:yyyy-mm-dd")),a)):Object(m.a)(Object(m.a)({},e),{},Object(T.a)({},t.field,t.data));case"startTraining":return e.trainingTypeId?Object(m.a)(Object(m.a)({},e),{},{missingInput:!1,isSavingTraining:!0}):Object(m.a)(Object(m.a)({},e),{},{missingInput:!0});case"startUpdating":return e.trainingTypeId?Object(m.a)(Object(m.a)({},e),{},{missingInput:!1,isUpdatingTraining:!0}):Object(m.a)(Object(m.a)({},e),{},{missingInput:!0});case"saveTrainingSuccess":return Object(m.a)(Object(m.a)({},e),{},{isSavingTraining:!1,savingTrainingResult:t.data.result,savingTrainingFailure:""});case"updateTrainingSuccess":return Object(m.a)(Object(m.a)({},e),{},{isUpdatingTraining:!1,updateTrainingResult:t.data.result,updateTrainingFailure:""});case"saveTrainingFailure":return Object(m.a)(Object(m.a)({},e),{},{isSavingTraining:!1,savingTrainingFailure:t.error});case"updateTrainingFailure":return Object(m.a)(Object(m.a)({},e),{},{isUpdatingTraining:!1,updateTrainingFailure:t.error});case"errorModalExit":return Object(m.a)(Object(m.a)({},e),{},{getTrainingsFailure:"",savingTrainingFailure:"",updateTrainingFailure:""})}},y=function(e){var t=Object(c.useReducer)(f,e),a=Object(s.a)(t,2);return[a[0],a[1]]},h=a(33),x={updateTrainingModal:!1,addTrainingModal:!1,isGettingTrainings:!0,trainings:null,getTrainingsFailure:"",presShowId:null,startDate:Object(O.a)(new Date,"UTC:yyyy-mm-dd"),endDate:Object(O.a)(new Date((new Date).setUTCHours((new Date).getUTCHours()+24)),"UTC:yyyy-mm-dd"),minDate:Object(O.a)(new Date((new Date).setUTCHours((new Date).getUTCHours()+24)),"UTC:yyyy-mm-dd"),petId:0,appId:0,trainingTypeId:0,trainingId:0,trainingTypes:null,isGettingTrainingTypes:!0,getTrainingTypesFailure:"",missingInput:!1,isSavingTraining:!1,savingTrainingResult:"",savingTrainingFailure:"",isUpdatingTraining:!1,updateTrainingResult:"",updateTrainingFailure:""};t.default=function(){var e=Object(p.g)(),t=Object(c.useContext)(g.a),a=Object(c.useContext)(j.a).setPageIsLoading,n=Object(b.a)(),T=y(x),m=Object(s.a)(T,2),f=m[0],v=m[1];return Object(c.useEffect)((function(){var s=!0,c=function(){var a=Object(r.a)(i.a.mark((function a(r){var c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n("".concat("https://pet-verse-app.herokuapp.com/","trainer/trainings/").concat(r),"GET",null,{Authorization:"Bearer ".concat(t.token)});case 3:c=a.sent,s&&c&&(v({type:"getTrainingsSuccess",data:c}),v({type:"prepareAddTraining",data:{petId:e.state.petId,appId:e.state.appId}})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),s&&v({type:"getTrainingsFailure",error:a.t0.message});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}();return e.state?c(e.state.appId):v({type:"getReset"}),function(){a(!1),s=!1}}),[t.token,v,e.state,n,a]),Object(c.useEffect)((function(){var s=!0,c=function(){var e=Object(r.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://pet-verse-app.herokuapp.com/","trainer/trainingtypes"),"GET",null,{Authorization:"Bearer ".concat(t.token)});case 3:a=e.sent,s&&a&&v({type:"getTrainingTypesSuccess",data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s&&v({type:"getTrainingTypesFailure",error:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return e.state?c():v({type:"getReset"}),function(){a(!1),s=!1}}),[t.token,v,e.state,n,a]),Object(c.useEffect)((function(){var e=!0,s=function(){var a=Object(r.a)(i.a.mark((function a(){var r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n("".concat("https://pet-verse-app.herokuapp.com/","trainer/trainings"),"POST",JSON.stringify({startDate:f.startDate,endDate:f.endDate,petId:f.petId,appId:f.appId,trainingTypeId:f.trainingTypeId}),{Authorization:"Bearer ".concat(t.token),"Content-Type":"application/json"});case 3:r=a.sent,e&&r&&v({type:"saveTrainingSuccess",data:r}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),e&&v({type:"saveTrainingFailure",error:a.t0.message});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}();return f.isSavingTraining&&s(),function(){a(!1),e=!1}}),[t.token,v,f.appId,f.isSavingTraining,f.petId,f.startDate,f.endDate,f.trainingTypeId,n,a]),Object(c.useEffect)((function(){var e=!0,s=function(){var a=Object(r.a)(i.a.mark((function a(){var r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n("".concat("https://pet-verse-app.herokuapp.com/","trainer/trainings"),"PATCH",JSON.stringify({startDate:f.startDate,endDate:f.endDate,trainingId:f.trainingId,petId:f.petId,appId:f.appId,trainingTypeId:f.trainingTypeId}),{Authorization:"Bearer ".concat(t.token),"Content-Type":"application/json"});case 3:r=a.sent,e&&r&&v({type:"updateTrainingSuccess",data:r}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),e&&v({type:"updateTrainingFailure",error:a.t0.message});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}();return f.isUpdatingTraining&&s(),function(){a(!1),e=!1}}),[t.token,v,f.appId,f.isUpdatingTraining,f.trainingId,f.petId,f.startDate,f.endDate,f.trainingTypeId,n,a]),Object(c.useEffect)((function(){a(f.isGettingTrainings||f.isSavingTraining||f.isUpdatingTraining||f.getTrainingTypesFailure)}),[a,f.isGettingTrainings,f.isSavingTraining,f.isUpdatingTraining,f.getTrainingTypesFailure]),Object(l.jsxs)(l.Fragment,{children:[(f.savingTrainingResult||f.updateTrainingResult)&&Object(l.jsx)(h.a,{modalClass:"success",header:"Success!!",body:f.savingTrainingResult||f.updateTrainingResult,dispatch:v,refresh:!0}),(f.getTrainingsFailure||f.savingTrainingFailure||f.updateTrainingFailure||f.getTrainingTypesFailure)&&Object(l.jsx)(h.a,{modalClass:"error",header:"Oops!!",body:f.getTrainingsFailure||f.savingTrainingFailure||f.updateTrainingFailure||f.getTrainingTypesFailure,dispatch:v}),Object(l.jsx)("h4",{children:"Pet Training"}),e.state?Object(l.jsxs)("div",{className:"flex-col falign-center fjust-center",children:[Object(l.jsx)("div",{className:"search-bar-container flex-row fjust-center falign-center gap-16p",children:Object(l.jsx)("button",{className:"btn-sm",onClick:function(){v({type:"addModal",data:!0})},children:"Add Training"})}),f.updateTrainingModal&&Object(l.jsx)(u,{dispatch:v,state:f}),f.addTrainingModal&&Object(l.jsx)(o,{dispatch:v,state:f}),Object(l.jsxs)(d.Table,{className:"my-table",children:[Object(l.jsx)(d.Thead,{children:Object(l.jsxs)(d.Tr,{children:[Object(l.jsx)(d.Th,{children:"Start Date"}),Object(l.jsx)(d.Th,{children:"End Date"}),Object(l.jsx)(d.Th,{children:"Training"}),Object(l.jsx)(d.Th,{children:"Trainer"}),Object(l.jsx)(d.Th,{children:"Pet Name"}),Object(l.jsx)(d.Th,{children:"Edit"})]})}),Object(l.jsx)(d.Tbody,{children:f.trainings&&f.trainings.map((function(e,a){return Object(l.jsxs)(d.Tr,{children:[Object(l.jsx)(d.Td,{children:Object(O.a)(e.start_date,"UTC: yyyy-mm-dd")}),Object(l.jsx)(d.Td,{children:Object(O.a)(e.end_date,"UTC: yyyy-mm-dd")}),Object(l.jsx)(d.Td,{children:e.training_type}),Object(l.jsx)(d.Td,{children:"".concat(e.first_name?e.first_name:"-"," ").concat(e.last_name?e.last_name:"-")}),Object(l.jsx)(d.Td,{children:e.pet_name}),Object(l.jsx)(d.Td,{children:Object(l.jsx)("button",{disabled:e.trainer_id!==t.userId||!e.trainer_id,className:"btn-sm",onClick:function(){v({type:"updateModal",data:!0,trObj:e,trainingId:e.id})},children:"Edit"})})]},a)}))})]})]}):Object(l.jsx)("p",{children:"No active appointment is selected at the moment you can select an active appointment from 'Active Appointments' tab to start the training"})]})}},30:function(e,t,a){"use strict";var n=a(8),i=a.n(n),r=a(11),s=a(1);t.a=function(){var e=Object(s.useCallback)(function(){var e=Object(r.a)(i.a.mark((function e(t){var a,n,r,s,c,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>1&&void 0!==d[1]?d[1]:"GET",n=d.length>2&&void 0!==d[2]?d[2]:null,r=d.length>3&&void 0!==d[3]?d[3]:{},e.prev=3,e.next=6,fetch(t,{method:a,headers:r,body:n});case 6:return s=e.sent,e.next=9,s.json();case 9:if(c=e.sent,s.ok){e.next=12;break}throw new Error(c.error);case 12:return e.abrupt("return",c);case 15:throw e.prev=15,e.t0=e.catch(3),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),[]);return e}},33:function(e,t,a){"use strict";var n=a(4),i=a(55),r=a(267),s=a(1),c={initial:{y:"-100vh"},final:{y:0},exit:{y:"-100vh"}},d=a(2),l=a(0),u=c;t.a=function(e){var t=Object(s.useState)(!0),a=Object(n.a)(t,2),c=a[0],o=a[1],p=Object(d.h)();return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"modal modal_".concat(e.modalClass),children:Object(l.jsx)(i.a,{children:c&&Object(l.jsxs)(r.a.div,{variants:u,initial:"initial",animate:"final",exit:"exit",className:"modal-container modal-container__".concat(e.modalClass," flex-col gap-16p falign-center"),children:[Object(l.jsx)("header",{className:"modal-header modal-header__".concat(e.modalClass),children:e.header}),Object(l.jsx)("div",{className:"flex-col gap-8p modal-body modal-body__".concat(e.modalClass),children:e.body}),Object(l.jsxs)("footer",{className:"modal-footer modal-footer__".concat(e.modalClass),children:[("check"===e.modalClass||"edit"===e.modalClass)&&Object(l.jsx)("button",{onClick:function(){o(!1),setTimeout((function(){e.dispatch({type:"finalConfirm"})}),300)},className:"btn-rec modal-button modal-button__confirm",children:"Confirm "}),Object(l.jsx)("button",{onClick:function(){return o(!1),e.refresh?setTimeout((function(){window.location.reload()}),300):e.redirectTo?setTimeout((function(){p(e.redirectTo)}),300):void setTimeout((function(){e.dispatch({type:"".concat(e.modalClass,"ModalExit")})}),300)},className:"btn-rec modal-button modal-button__".concat(e.modalClass),children:"success"===e.modalClass?"OK":"check"===e.modalClass||"edit"===e.modalClass?"Cancel":"Exit"})]})]})})})})}}}]);
//# sourceMappingURL=37.b48089e8.chunk.js.map