(this["webpackJsonppet-clinic-app"]=this["webpackJsonppet-clinic-app"]||[]).push([[31],{112:function(e,t,s){"use strict";s.r(t);var r=s(8),c=s.n(r),a=s(11),n=s(4),o=s(56),i=s(1),l=s.n(i),d=s(0),u=function(e){var t=e.closeModal;return Object(d.jsx)("div",{className:"modal-background flex-col falign-center fjust-center",children:Object(d.jsxs)("div",{className:"modal-container flex-col gap-16p falign-center fjust-center",children:[Object(d.jsx)("div",{className:"x-close",children:Object(d.jsx)("button",{onClick:function(){return t(!1)},children:Object(d.jsx)("i",{className:"fa-solid fa-xmark"})})}),Object(d.jsx)("div",{className:"modal-title",children:"Update Request Status:"}),Object(d.jsxs)("div",{className:"edit-modal-buttons-container flex-row  gap-24p fjust-center",children:[Object(d.jsx)("button",{className:"btn-rec-purple",children:"Accept"}),Object(d.jsx)("button",{className:"btn-rec-purple",children:"Reject"})]})]})})},j=s(44),b=(s(54),s(5)),h=s(31),p=function(e,t){switch(t.type){case"start":return Object(h.a)(Object(h.a)({},e),{},{responseError:"",isLoading:!0});case"selectRequestToDelete":return Object(h.a)(Object(h.a)({},e),{},{requestToDelete:t.data});case"startDeleting":return Object(h.a)(Object(h.a)({},e),{},{responseError:"",isDeleting:!0});case"successDelete":return Object(h.a)(Object(h.a)({},e),{},{responseError:"",isDeleting:!1,deleteResult:t.data});case"success":return Object(h.a)(Object(h.a)({},e),{},{responseError:"",isLoading:!1,responseData:t.data});case"failure":return Object(h.a)(Object(h.a)({},e),{},{responseError:t.error,isLoading:!1,isDeleting:!1,isTransferingOwner:!1});case"errorModalExit":return Object(h.a)(Object(h.a)({},e),{},{responseError:""});case"showModalEnter":return Object(h.a)(Object(h.a)({},e),{},{showModal:!0,selectedRequest:t.data});case"showModalExit":return Object(h.a)(Object(h.a)({},e),{},{showModal:!1,areYouSureSubmit:!1});case"ownershipData":return Object(h.a)(Object(h.a)({},e),{},{selectedAd:t.adId,selectedPet:t.petId});case"selectRequester":return Object(h.a)(Object(h.a)({},e),{},{selectedNewOwner:t.data});case"areYouSureEnter":return Object(h.a)(Object(h.a)({},e),{},{areYouSureSubmit:!e.areYouSureSubmit});case"areYouSureExit":return Object(h.a)(Object(h.a)({},e),{},{areYouSureSubmit:!1});case"areYouSureConfirm":return Object(h.a)(Object(h.a)({},e),{},{isTransferingOwner:!0,showModal:!1});case"successTransfer":return Object(h.a)(Object(h.a)({},e),{},{isTransferingOwner:!1,transferOwnerResult:t.data})}},O=function(e){var t=Object(i.useReducer)(p,e),s=Object(n.a)(t,2);return[s[0],s[1]]},f=s(12),m=s(6),x=s(30),g=s(34),T=s(33),v={isLoading:!0,responseData:null,responseError:"",requestToDelete:"",isDeleting:!1,deleteResult:"",showModal:!1,selectedRequest:null,areYouSureSubmit:!1,isTransferingOwner:!1,transferOwnerResult:"",selectedPet:"",selectedAd:"",selectedNewOwner:""};t.default=function(e){var t=Object(i.useState)(!1),s=Object(n.a)(t,2),r=s[0],h=s[1],p=Object(i.useState)(!1),w=Object(n.a)(p,2),y=w[0],N=w[1],k=O(v),R=Object(n.a)(k,2),q=R[0],D=R[1],C=Object(i.useContext)(f.a),S=Object(i.useContext)(m.a).setPageIsLoading,_=Object(x.a)(),E=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e=!0,t=function(){var t=Object(a.a)(c.a.mark((function t(){var s,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s="".concat("receptionist"===C.userRole||"admin"===C.userRole?"".concat("https://pet-verse-app.herokuapp.com/","receptionist/adoptionRequests"):"".concat("https://pet-verse-app.herokuapp.com/","users/me/requests")),t.next=4,_(s,"GET",null,{Authorization:"Bearer ".concat(C.token)});case 4:(r=t.sent)&&e&&D({type:"success",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e&&D({type:"failure",error:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){S(!1),e=!1}}),[C.token,C.userRole,D,_,S]),Object(i.useEffect)((function(){var e=!0,t=function(){var t=Object(a.a)(c.a.mark((function t(){var s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_("".concat("https://pet-verse-app.herokuapp.com/","users/me/requests/").concat(q.requestToDelete?q.requestToDelete:""),"DELETE",null,{Authorization:"Bearer ".concat(C.token)});case 3:(s=t.sent)&&e&&D({type:"successDelete",data:s.result}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e&&D({type:"failure",error:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return q.isDeleting&&e&&t(),function(){S(!1),e=!1}}),[C.token,D,_,S,q.isDeleting,q.requestToDelete]),Object(i.useEffect)((function(){var e=!0,t=function(){var t=Object(a.a)(c.a.mark((function t(){var s,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s="".concat("receptionist"===C.userRole||"admin"===C.userRole?"".concat("https://pet-verse-app.herokuapp.com/","receptionist/pets/").concat(q.selectedPet&&q.selectedPet,"/").concat(q.selectedNewOwner&&q.selectedNewOwner,"/").concat(q.selectedAd&&q.selectedAd):"".concat("https://pet-verse-app.herokuapp.com/","users/me/pets/").concat(q.selectedPet&&q.selectedPet,"/").concat(q.selectedNewOwner&&q.selectedNewOwner,"/").concat(q.selectedAd&&q.selectedAd)),t.next=4,_(s,"PATCH",null,{Authorization:"Bearer ".concat(C.token)});case 4:(r=t.sent)&&e&&D({type:"successTransfer",data:r.result}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e&&D({type:"failure",error:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return q.isTransferingOwner&&e&&t(),function(){S(!1),e=!1}}),[C.token,C.userRole,D,_,S,q.isTransferingOwner,q.selectedAd,q.selectedPet,q.selectedNewOwner]),Object(i.useEffect)((function(){S(q.isLoading||q.isDeleting||q.isTransferingOwner)}),[S,q.isLoading,q.isDeleting,q.isTransferingOwner]),Object(d.jsxs)(d.Fragment,{children:[q.responseError&&Object(d.jsx)(T.a,{modalClass:"error",header:"Oops!!",body:q.responseError,dispatch:D,redirectTo:"/"}),q.deleteResult&&Object(d.jsx)(T.a,{modalClass:"success",header:"Success!!",body:q.deleteResult,dispatch:D,refresh:!0}),q.transferOwnerResult&&Object(d.jsx)(T.a,{modalClass:"success",header:"Success!!",body:q.transferOwnerResult,dispatch:D,refresh:!0}),q.showModal&&Object(d.jsx)(T.a,{modalClass:"show",header:"Your adoption ad wish list",body:Object(d.jsx)("div",{className:"are-you-sure-wrapper",children:Object(d.jsxs)("div",{className:" flex-col gap-12p",children:[q.areYouSureSubmit&&Object(d.jsxs)("div",{ref:E,className:"are-you-sure-container flex-col gap-16p",children:[Object(d.jsx)("p",{className:"are-you-sure-message",children:"By accepting the request you will be approving that a meeting with the requester has been conducted and the requester you have selected is the right candidate for your pet, and you are willing to transfer your pet's ownership to the requester. Your adoption post will be removed so you can no longer see the requested pet in your profile and all data related to you pet will be handed to the new owner,Also by accepting you will be rejecting all other requesters in the list so is Yes your final answer ?"}),Object(d.jsxs)("div",{className:"are-you-sure-buttons-wrapper flex-row gap-8p fjust-center",children:[Object(d.jsx)("button",{onClick:function(){D({type:"areYouSureConfirm"})},className:"btn-r btn-r-blue accept-adoption-final",children:"Yes"}),Object(d.jsx)("button",{onClick:function(){return D({type:"areYouSureExit"})},className:"btn-r btn-r-blue accept-adoption-final",children:"No"})]})]}),Object(d.jsxs)(j.Table,{className:"my-table",children:[Object(d.jsx)(j.Thead,{children:Object(d.jsxs)(j.Tr,{children:[Object(d.jsx)(j.Th,{children:"Sent AT"}),Object(d.jsx)(j.Th,{children:"Status"}),Object(d.jsx)(j.Th,{children:"Requester first name"}),Object(d.jsx)(j.Th,{children:"Requester last name"}),Object(d.jsx)(j.Th,{children:"Requester phone number"}),Object(d.jsx)(j.Th,{children:"Action"})]})}),Object(d.jsx)(j.Tbody,{children:q.responseData&&q.responseData.finalReceived[q.selectedRequest].map((function(e,t){return Object(d.jsx)(l.a.Fragment,{children:Object(d.jsxs)(j.Tr,{children:[Object(d.jsx)(j.Td,{children:Object(g.a)(e.date,"default")}),Object(d.jsx)(j.Td,{children:e.status}),Object(d.jsx)(j.Td,{children:e.requester_first_name}),Object(d.jsx)(j.Td,{children:e.requester_last_name}),Object(d.jsx)(j.Td,{children:e.requester_phone_number}),Object(d.jsx)(j.Td,{children:Object(d.jsx)("button",{reqid:e.requester_id,onClick:function(e){D({type:"selectRequester",data:e.currentTarget.getAttribute("reqid")}),D({type:"areYouSureEnter"}),setTimeout((function(){E.current.scrollIntoView()}),300)},disabled:q.areYouSureSubmit,style:{backgroundColor:q.areYouSureSubmit?"grey":"",color:q.areYouSureSubmit?"white":"",cursor:q.areYouSureSubmit?"default":"pointer"},className:"btn-r btn-r-blue accept-adoption",children:"Accept"})})]})},t)}))})]})]})}),dispatch:D}),Object(d.jsx)("h4",{children:"Adoption Requests Management"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"flex-col falign-center fjust-center ",children:r&&Object(d.jsx)(o.a,{closeModal:h,dispatch:D})}),Object(d.jsx)("div",{className:"flex-col falign-center fjust-center ",children:y&&Object(d.jsx)(u,{closeModal:N})}),!e.onlyReceived&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{children:"Sent Adoption Requests"}),Object(d.jsxs)(j.Table,{className:"my-table",children:[q.responseData&&q.responseData.sentRequests&&0===q.responseData.sentRequests.length&&Object(d.jsx)(j.Thead,{children:Object(d.jsx)(j.Tr,{children:Object(d.jsx)(j.Th,{children:"No sent requests"})})}),q.responseData&&q.responseData.sentRequests&&0!==q.responseData.sentRequests.length&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j.Thead,{children:Object(d.jsxs)(j.Tr,{children:[Object(d.jsx)(j.Th,{children:"Pet You Requested"}),Object(d.jsx)(j.Th,{children:"Sent At"}),Object(d.jsx)(j.Th,{children:"Status"}),Object(d.jsx)(j.Th,{children:"Delete"})]})}),Object(d.jsx)(j.Tbody,{children:q.responseData.sentRequests.map((function(e,t){return Object(d.jsxs)(j.Tr,{children:[Object(d.jsx)(j.Td,{children:"pending"===e.status?Object(d.jsx)(b.b,{className:"my-great-button",to:"/adoptionad/".concat(e.adoption_ad_id),target:"_blank",children:"Click here to view"}):"accepted"===e.status?Object(d.jsx)(b.b,{className:"my-great-button",to:"/myprofile/petinfo",children:"Check out your new pet"}):"Post got removed"}),Object(d.jsx)(j.Td,{children:Object(g.a)(e.date,"default")}),Object(d.jsx)(j.Td,{style:"accepted"===e.status?{color:"green"}:"rejected"===e.status?{color:"red"}:{color:"black"},children:"accepted"===e.status?"Your adoption request got accepted ":"rejected"===e.status?"Pet got adopted by others":e.status}),"pending"===e.status?Object(d.jsx)(j.Td,{children:Object(d.jsx)("button",{disabled:r,style:{color:r?"grey":"",cursor:r?"default":"pointer"},className:"my-great-button margin-bottom",id:e.adoption_ad_id,onClick:function(e){window.scrollTo(0,0),D({type:"selectRequestToDelete",data:e.currentTarget.id}),h(!0)},children:Object(d.jsx)("i",{className:"fa-regular fa-trash-can"})})}):Object(d.jsx)(j.Td,{children:"-/-"})]},"".concat(t+"-tr"))}))})]})]})]}),Object(d.jsx)("h3",{children:"Received Adoption Requests"}),Object(d.jsxs)(j.Table,{className:"my-table",children:[q.responseData&&q.responseData.finalReceived&&0===q.responseData.finalReceived.length&&Object(d.jsx)(j.Thead,{children:Object(d.jsx)(j.Tr,{children:Object(d.jsx)(j.Th,{children:"No received requests"})})}),q.responseData&&q.responseData.finalReceived&&0!==q.responseData.finalReceived.length&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j.Thead,{children:Object(d.jsxs)(j.Tr,{children:[Object(d.jsx)(j.Th,{children:"Your Requested Pet"}),Object(d.jsx)(j.Th,{children:"Requesters"})]})}),Object(d.jsx)(j.Tbody,{children:q.responseData.finalReceived.map((function(e,t){return Object(d.jsx)(l.a.Fragment,{children:Object(d.jsxs)(j.Tr,{children:[Object(d.jsx)(j.Td,{children:Object(d.jsx)(b.b,{className:"my-great-button",to:"/adoptionad/".concat(e[0].adoption_ad_id),target:"_blank",children:"Click here to view"})}),Object(d.jsx)(j.Td,{children:Object(d.jsxs)("button",{id:t,petid:e[0].pet_id,adid:e[0].adoption_ad_id,className:"my-great-button margin-bottom",onClick:function(e){D({type:"ownershipData",petId:e.currentTarget.getAttribute("petid"),adId:e.currentTarget.getAttribute("adid")}),D({type:"showModalEnter",data:e.currentTarget.id})},children:["You have ",e.length," request(s) click to check ",Object(d.jsx)("i",{className:"fa-solid fa-circle-exclamation"})]})})]})},"index-".concat(t))}))})]})]})]})]})}},30:function(e,t,s){"use strict";var r=s(8),c=s.n(r),a=s(11),n=s(1);t.a=function(){var e=Object(n.useCallback)(function(){var e=Object(a.a)(c.a.mark((function e(t){var s,r,a,n,o,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i.length>1&&void 0!==i[1]?i[1]:"GET",r=i.length>2&&void 0!==i[2]?i[2]:null,a=i.length>3&&void 0!==i[3]?i[3]:{},e.prev=3,e.next=6,fetch(t,{method:s,headers:a,body:r});case 6:return n=e.sent,e.next=9,n.json();case 9:if(o=e.sent,n.ok){e.next=12;break}throw new Error(o.error);case 12:return e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(3),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),[]);return e}},33:function(e,t,s){"use strict";var r=s(4),c=s(55),a=s(267),n=s(1),o={initial:{y:"-100vh"},final:{y:0},exit:{y:"-100vh"}},i=s(2),l=s(0),d=o;t.a=function(e){var t=Object(n.useState)(!0),s=Object(r.a)(t,2),o=s[0],u=s[1],j=Object(i.h)();return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"modal modal_".concat(e.modalClass),children:Object(l.jsx)(c.a,{children:o&&Object(l.jsxs)(a.a.div,{variants:d,initial:"initial",animate:"final",exit:"exit",className:"modal-container modal-container__".concat(e.modalClass," flex-col gap-16p falign-center"),children:[Object(l.jsx)("header",{className:"modal-header modal-header__".concat(e.modalClass),children:e.header}),Object(l.jsx)("div",{className:"flex-col gap-8p modal-body modal-body__".concat(e.modalClass),children:e.body}),Object(l.jsxs)("footer",{className:"modal-footer modal-footer__".concat(e.modalClass),children:[("check"===e.modalClass||"edit"===e.modalClass)&&Object(l.jsx)("button",{onClick:function(){u(!1),setTimeout((function(){e.dispatch({type:"finalConfirm"})}),300)},className:"btn-rec modal-button modal-button__confirm",children:"Confirm "}),Object(l.jsx)("button",{onClick:function(){return u(!1),e.refresh?setTimeout((function(){window.location.reload()}),300):e.redirectTo?setTimeout((function(){j(e.redirectTo)}),300):void setTimeout((function(){e.dispatch({type:"".concat(e.modalClass,"ModalExit")})}),300)},className:"btn-rec modal-button modal-button__".concat(e.modalClass),children:"success"===e.modalClass?"OK":"check"===e.modalClass||"edit"===e.modalClass?"Cancel":"Exit"})]})]})})})})}},56:function(e,t,s){"use strict";var r=s(0);t.a=function(e){var t=e.closeModal,s=e.dispatch;return Object(r.jsx)("div",{className:"modal-background flex falign-center fjust-center",children:Object(r.jsxs)("div",{className:"modal-container flex-col fgap-16p falign-center fjust-center",children:[Object(r.jsx)("div",{className:"x-close",children:Object(r.jsx)("button",{onClick:function(){return t(!1)},children:Object(r.jsx)("i",{className:"fa-solid fa-xmark"})})}),Object(r.jsx)("div",{className:"modal-title",children:"Are you sure you want to delete?"}),Object(r.jsxs)("div",{className:"flex-row edit-modal-buttons-container gap-24p fjust-center",children:[Object(r.jsx)("button",{onClick:function(){t(!1),s({type:"startDeleting"})},className:"btn-rec-purple",children:"Yes"}),Object(r.jsx)("button",{onClick:function(){return t(!1)},className:"btn-rec-purple",children:"No"})]})]})})}}}]);
//# sourceMappingURL=31.75d21355.chunk.js.map