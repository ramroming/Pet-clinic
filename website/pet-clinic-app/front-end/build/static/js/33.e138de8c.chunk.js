(this["webpackJsonppet-clinic-app"]=this["webpackJsonppet-clinic-app"]||[]).push([[33],{273:function(e,t,a){"use strict";a.r(t);var s=a(8),n=a.n(s),r=a(11),c=a(4),l=a(44),i=(a(54),a(1)),o=a(56),u=a(5),d=a(0),j=function(e){var t=e.setOpenEditModal,a=e.state,s=e.dispatch;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(u.b,{to:"/",className:"logo-link",children:Object(d.jsx)("img",{src:"/media/imgs/favicon.png",alt:"",className:"logo"})}),Object(d.jsxs)("div",{className:"input-wrapper flex-row fjust-between",children:[Object(d.jsxs)("div",{className:"flex-col gap-8p falign-center",style:{marginTop:"1rem"},children:[Object(d.jsxs)("label",{className:"",children:["Select new role for ",Object(d.jsxs)("span",{style:{fontWeight:"bold"},children:["(",a.username,")"]})]}),Object(d.jsxs)("label",{className:"",children:["Current role ",Object(d.jsxs)("span",{style:{fontWeight:"bold"},children:["(",a.currentRole,")"]})]})]}),Object(d.jsxs)("select",{value:a.newRole,onChange:function(e){return s({type:"selectRole",value:e.currentTarget.value})},name:"newRole",id:"Role",children:[Object(d.jsx)("option",{value:"unselected",children:"Select Role"}),Object(d.jsx)("option",{value:"",children:"Client"}),Object(d.jsx)("option",{value:"admin",children:"Admin"}),Object(d.jsx)("option",{value:"receptionist",children:"Receptionist"}),Object(d.jsx)("option",{value:"vet",children:"Vet"}),Object(d.jsx)("option",{value:"groomer",children:"Groomer"}),Object(d.jsx)("option",{value:"trainer",children:"Trainer"})]})]}),Object(d.jsxs)("div",{className:"button-wrapper flex-row gap-8p fjust-center",children:[Object(d.jsx)("button",{disabled:"unselected"===a.newRole,onClick:function(){s({type:"updateRole"})},type:"submit",className:"unselected"===a.newRole?"btn-r btn-r-dark disabled":"btn-r btn-r-dark",children:"Update user role"}),Object(d.jsx)("button",{className:"btn-r btn-r-dark",onClick:function(){t(!1)},children:"Cancel"})]})]})},b=a(31),p=function(e,t){switch(t.type){case"getUsersSuccess":return Object(b.a)(Object(b.a)({},e),{},{isGettingUsers:!1,users:t.data});case"getUsersFailure":return Object(b.a)(Object(b.a)({},e),{},{isGettingUsers:!1,gettingUsersFailure:t.error});case"selectUserToChange":return Object(b.a)(Object(b.a)({},e),{},{userToChange:t.data,username:t.data2,currentRole:t.data3,newRole:"unselected"});case"selectRole":return Object(b.a)(Object(b.a)({},e),{},{newRole:t.value});case"updateRole":return Object(b.a)(Object(b.a)({},e),{},{isUpdatingRole:!0});case"updateRoleSuccess":return Object(b.a)(Object(b.a)({},e),{},{isUpdatingRole:!1,updateRoleResult:t.data});case"updateRoleFailure":return Object(b.a)(Object(b.a)({},e),{},{isUpdatingRole:!1,updateRoleFailure:t.error});case"errorModalExit":return Object(b.a)(Object(b.a)({},e),{},{updateRoleFailure:"",gettingUsersFailure:"",deleteUserFailure:""});case"selectUserToDelete":return Object(b.a)(Object(b.a)({},e),{},{userToDelete:t.data});case"startDeleting":return Object(b.a)(Object(b.a)({},e),{},{isDeletingUser:!0});case"deleteUserSuccess":return Object(b.a)(Object(b.a)({},e),{},{isDeletingUser:!1,deleteUserResult:t.data});case"deleteUserFailure":return Object(b.a)(Object(b.a)({},e),{},{isDeletingUser:!1,deleteUserFailure:t.error});case"clearUserToDelete":return Object(b.a)(Object(b.a)({},e),{},{userToDelete:null});case"clearUserToChange":return Object(b.a)(Object(b.a)({},e),{},{userToChange:null})}},h=function(e){var t=Object(i.useReducer)(p,e),a=Object(c.a)(t,2);return[a[0],a[1]]},m=a(12),O=a(6),f=a(30),x=a(33),g={isGettingUsers:!0,users:null,gettingUsersFailure:"",userToChange:null,username:"",currentRole:"",newRole:"unselected",isUpdatingRole:!1,updateRoleResult:"",updateRoleFailure:"",userToDelete:null,isDeletingUser:!1,deleteUserResult:"",deleteUserFailure:""};t.default=function(){var e=Object(i.useState)(!1),t=Object(c.a)(e,2),a=t[0],s=t[1],u=Object(i.useState)(!1),b=Object(c.a)(u,2),p=b[0],v=b[1],T=h(g),U=Object(c.a)(T,2),R=U[0],C=U[1],y=Object(i.useContext)(m.a),k=Object(i.useContext)(O.a).setPageIsLoading,w=Object(f.a)();return Object(i.useEffect)((function(){var e=!0,t=function(){var t=Object(r.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w("".concat("https://pet-verse-app.herokuapp.com/","admin/users"),"GET",null,{Authorization:"Bearer ".concat(y.token)});case 3:(a=t.sent)&&e&&C({type:"getUsersSuccess",data:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e&&C({type:"getUsersFailure",error:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){k(!1),e=!1}}),[y.token,C,w,k]),Object(i.useEffect)((function(){var e=!0,t=function(){var t=Object(r.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w("".concat("https://pet-verse-app.herokuapp.com/","admin/users/").concat(R.userToChange),"PATCH",JSON.stringify({newRole:R.newRole}),{Authorization:"Bearer ".concat(y.token),"Content-Type":"application/json"});case 3:(a=t.sent)&&e&&C({type:"updateRoleSuccess",data:a.result}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e&&C({type:"updateRoleFailure",error:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return R.isUpdatingRole&&t(),function(){k(!1),e=!1}}),[y.token,C,w,k,R.isUpdatingRole,R.newRole,R.userToChange]),Object(i.useEffect)((function(){var e=!0,t=function(){var t=Object(r.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w("".concat("https://pet-verse-app.herokuapp.com/","admin/users/").concat(R.userToDelete),"DELETE",null,{Authorization:"Bearer ".concat(y.token)});case 3:(a=t.sent)&&e&&C({type:"deleteUserSuccess",data:a.result}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e&&C({type:"deleteUserFailure",error:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return R.isDeletingUser&&t(),function(){k(!1),e=!1}}),[y.token,C,w,k,R.isDeletingUser,R.userToDelete]),Object(i.useEffect)((function(){k(R.isGettingUsers||R.isUpdatingRole||R.isDeletingUser)}),[k,R.isGettingUsers,R.isUpdatingRole,R.isDeletingUser]),Object(i.useEffect)((function(){a||R.isDeletingUser||C({type:"clearUserToDelete"}),p||R.isDeletingUser||C({type:"clearUserToChange"})}),[a,p,C,R.isDeletingUser]),Object(d.jsxs)(d.Fragment,{children:[(R.gettingUsersFailure||R.updateRoleFailure||R.deleteUserFailure)&&Object(d.jsx)(x.a,{modalClass:"error",header:"Oops!!",body:R.gettingUsersFailure||R.updateRoleFailure||R.deleteUserFailure,dispatch:C}),(R.updateRoleResult||R.deleteUserResult)&&Object(d.jsx)(x.a,{modalClass:"success",header:"Success!!",body:R.updateRoleResult||R.deleteUserResult,dispatch:C,refresh:!0}),Object(d.jsx)("h4",{children:"Manage Users"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"flex-col falign-center fjust-center ",children:a&&Object(d.jsx)(o.a,{closeModal:s,dispatch:C})}),Object(d.jsx)("div",{className:"flex-col falign-center fjust-center ",children:p&&Object(d.jsx)(j,{setOpenEditModal:v,state:R,dispatch:C})}),Object(d.jsxs)(l.Table,{className:"my-table",children:[Object(d.jsx)(l.Thead,{children:Object(d.jsxs)(l.Tr,{children:[Object(d.jsx)(l.Th,{children:"ID"}),Object(d.jsx)(l.Th,{children:"Username"}),Object(d.jsx)(l.Th,{children:"first name"}),Object(d.jsx)(l.Th,{children:"Last name"}),Object(d.jsx)(l.Th,{children:"email"}),Object(d.jsx)(l.Th,{children:"Role"}),Object(d.jsx)(l.Th,{children:"Change Role"}),Object(d.jsx)(l.Th,{children:"Delete"})]})}),Object(d.jsx)(l.Tbody,{children:R.users&&R.users.map((function(e,t){return Object(d.jsxs)(l.Tr,{children:[Object(d.jsx)(l.Td,{children:e.id}),Object(d.jsx)(l.Td,{children:e.username}),Object(d.jsx)(l.Td,{children:e.first_name}),Object(d.jsx)(l.Td,{children:e.last_name}),Object(d.jsx)(l.Td,{children:e.email}),Object(d.jsx)(l.Td,{children:e.stmem_type?e.stmem_type:"client"}),Object(d.jsx)(l.Td,{children:Object(d.jsx)("button",{className:"my-great-button margin-bottom",onClick:function(){window.scrollTo(0,0),v(!0),s(!1),C({type:"selectUserToChange",data:e.id,data2:e.username,data3:e.stmem_type?e.stmem_type:"client"})},children:Object(d.jsx)("i",{className:R.userToChange===e.id?"fa-regular fa-pen-to-square active":"fa-regular fa-pen-to-square"})})}),Object(d.jsx)(l.Td,{children:Object(d.jsx)("button",{className:"my-great-button margin-bottom",onClick:function(){window.scrollTo(0,0),s(!0),v(!1),C({type:"selectUserToDelete",data:e.personal_id})},children:Object(d.jsx)("i",{className:R.userToDelete===e.personal_id?"fa-regular fa-trash-can active":"fa-regular fa-trash-can"})})})]},t)}))})]})]})]})}},30:function(e,t,a){"use strict";var s=a(8),n=a.n(s),r=a(11),c=a(1);t.a=function(){var e=Object(c.useCallback)(function(){var e=Object(r.a)(n.a.mark((function e(t){var a,s,r,c,l,i=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:"GET",s=i.length>2&&void 0!==i[2]?i[2]:null,r=i.length>3&&void 0!==i[3]?i[3]:{},e.prev=3,e.next=6,fetch(t,{method:a,headers:r,body:s});case 6:return c=e.sent,e.next=9,c.json();case 9:if(l=e.sent,c.ok){e.next=12;break}throw new Error(l.error);case 12:return e.abrupt("return",l);case 15:throw e.prev=15,e.t0=e.catch(3),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),[]);return e}},33:function(e,t,a){"use strict";var s=a(4),n=a(55),r=a(267),c=a(1),l={initial:{y:"-100vh"},final:{y:0},exit:{y:"-100vh"}},i=a(2),o=a(0),u=l;t.a=function(e){var t=Object(c.useState)(!0),a=Object(s.a)(t,2),l=a[0],d=a[1],j=Object(i.h)();return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"modal modal_".concat(e.modalClass),children:Object(o.jsx)(n.a,{children:l&&Object(o.jsxs)(r.a.div,{variants:u,initial:"initial",animate:"final",exit:"exit",className:"modal-container modal-container__".concat(e.modalClass," flex-col gap-16p falign-center"),children:[Object(o.jsx)("header",{className:"modal-header modal-header__".concat(e.modalClass),children:e.header}),Object(o.jsx)("div",{className:"flex-col gap-8p modal-body modal-body__".concat(e.modalClass),children:e.body}),Object(o.jsxs)("footer",{className:"modal-footer modal-footer__".concat(e.modalClass),children:[("check"===e.modalClass||"edit"===e.modalClass)&&Object(o.jsx)("button",{onClick:function(){d(!1),setTimeout((function(){e.dispatch({type:"finalConfirm"})}),300)},className:"btn-rec modal-button modal-button__confirm",children:"Confirm "}),Object(o.jsx)("button",{onClick:function(){return d(!1),e.refresh?setTimeout((function(){window.location.reload()}),300):e.redirectTo?setTimeout((function(){j(e.redirectTo)}),300):void setTimeout((function(){e.dispatch({type:"".concat(e.modalClass,"ModalExit")})}),300)},className:"btn-rec modal-button modal-button__".concat(e.modalClass),children:"success"===e.modalClass?"OK":"check"===e.modalClass||"edit"===e.modalClass?"Cancel":"Exit"})]})]})})})})}},56:function(e,t,a){"use strict";var s=a(0);t.a=function(e){var t=e.closeModal,a=e.dispatch;return Object(s.jsx)("div",{className:"modal-background flex falign-center fjust-center",children:Object(s.jsxs)("div",{className:"modal-container flex-col fgap-16p falign-center fjust-center",children:[Object(s.jsx)("div",{className:"x-close",children:Object(s.jsx)("button",{onClick:function(){return t(!1)},children:Object(s.jsx)("i",{className:"fa-solid fa-xmark"})})}),Object(s.jsx)("div",{className:"modal-title",children:"Are you sure you want to delete?"}),Object(s.jsxs)("div",{className:"flex-row edit-modal-buttons-container gap-24p fjust-center",children:[Object(s.jsx)("button",{onClick:function(){t(!1),a({type:"startDeleting"})},className:"btn-rec-purple",children:"Yes"}),Object(s.jsx)("button",{onClick:function(){return t(!1)},className:"btn-rec-purple",children:"No"})]})]})})}}}]);
//# sourceMappingURL=33.e138de8c.chunk.js.map