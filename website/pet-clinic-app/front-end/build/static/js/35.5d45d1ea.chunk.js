(this["webpackJsonppet-clinic-app"]=this["webpackJsonppet-clinic-app"]||[]).push([[35],{268:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n.n(a),c=n(11),s=n(4),i=n(31),o=n(267),p=n(55),l=n(34),u=n(0),d={initial:{opacity:0},final:{opacity:1,transition:{duration:1.1}},exit:{opacity:0,transition:{delay:1,duration:.2}}},m=function(e){return Object(u.jsx)(p.a,{exitBeforeEnter:!0,children:Object(u.jsxs)(o.a.div,{variants:d,initial:"initial",animate:"final",exit:"exit",className:1===e.card.status&&0===e.card.confirmed?"appointment-card appointment-active flex-col falign-start gap-16p":"appointment-card appointment-past flex-col falign-start gap-16p",children:[Object(u.jsxs)("div",{className:"flex-row",children:[Object(u.jsxs)("p",{children:[e.card.appointment_type," / "]}),Object(u.jsxs)("p",{className:"app-status",children:[" ",1===e.card.status&&0===e.card.confirmed?"Active":"Past"]})]}),Object(u.jsxs)("div",{className:"flex-row gap-16p",children:[Object(u.jsx)("i",{className:"fas fa-clock"}),Object(u.jsx)("p",{children:Object(l.a)(e.card.date,"default")})]}),Object(u.jsxs)("div",{className:"flex-row gap-16p",children:[Object(u.jsx)("i",{className:"fas fa-user-nurse"}),Object(u.jsx)("p",{children:e.card.first_name+" "+e.card.last_name})]}),Object(u.jsxs)("div",{className:"flex-row gap-16p",children:[Object(u.jsx)("i",{className:"fas fa-paw"}),Object(u.jsx)("p",{children:e.card.pet_name})]}),1===e.card.status&&0===e.card.confirmed?Object(u.jsx)("button",{onClick:function(t){return function(t){e.dispatch({type:"checkModalEnter",appointmentToDelete:t.target.getAttribute("apid")})}(t)},apid:e.card.id,className:"btn-rec-purple",children:"Cancel"}):""]})})},j=n(1),f=n.n(j),b=function(e){return Object(u.jsxs)("div",{style:{top:e.top,left:e.left},className:"lds-ripple-".concat(e.color),children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})},h=function(e,t,n){var a=[!0];if(n)for(var r=0;r<n.length;r++)if(t.current[3]<n[r].size){for(var c=n[r].cardsNum+1;c<=e;c++)(c-1)%n[r].cardsNum===0&&a.push(!1);break}return a},O=function(e,t,n){if(t)for(var a=0;a<t.length;a++)if(e.current[3]<t[a].size){if(0===e.current[2]){for(var r=[],c=0;c<n.length;c++)c<t[a].cardsNum&&(e.current[2]+=1,r.push(c));return r}break}},x=[{size:767,cardsNum:2},{size:1/0,cardsNum:4}],g=function(e){var t=Object(j.useRef)([0,0,0,window.innerWidth]),n=Object(j.useState)({}),a=Object(s.a)(n,2),r=a[0],c=a[1];Object(j.useEffect)((function(){0!==e.appointments.length&&c({pag:h(e.appointments.length,t,x),cards:O(t,x,e.appointments)})}),[e.appointments]);var o=function(n){if("fas fa-chevron-right"===n.target.className){if(t.current[1]+1!==r.pag.length){t.current[0]=t.current[1],t.current[1]=t.current[1]+1;var a=function(e,t,n){var a=[];a.push(e.current[2]);for(var r=0;r<t.length;r++)if(e.current[3]<t[r].size){for(var c=e.current[2]+1;c<=n.length&&(e.current[2]=e.current[2]+1,e.current[2]%t[r].cardsNum!==0)&&c!==n.length;c++)a.push(e.current[2]);break}return a}(t,x,e.appointments);c((function(e){return Object(i.a)(Object(i.a)({},e),{},{pag:r.pag.map((function(e,n){return n===t.current[0]||n===t.current[1]?!e:e})),cards:a})}))}}else if(t.current[1]-1>=0){t.current[0]=t.current[1],t.current[1]=t.current[1]-1;var s=function(e,t,n,a){for(var r=[],c=0;c<t.length;c++)if(e.current[3]<t[c].size){e.current[2]=e.current[2]-(t[c].cardsNum+n),r.push(e.current[2]);for(var s=e.current[2]+1;s<a.length&&(e.current[2]=e.current[2]+1,e.current[2]%t[c].cardsNum!==0);s++)r.push(e.current[2]);break}return r}(t,x,r.cards.length,e.appointments);c((function(e){return Object(i.a)(Object(i.a)({},e),{},{pag:r.pag.map((function(e,n){return n===t.current[0]||n===t.current[1]?!e:e})),cards:s})}))}},p=function(n){var a=n.target.className[1];t.current[0]=t.current[1],t.current[1]=Number(a);var s=function(e,t,n,a){for(var r=[],c=0;c<t.length;c++)if(e.current[3]<t[c].size){var s=e.current[1]-e.current[0];if(s>0){e.current[2]=e.current[2]-t[c].cardsNum+(s*t[c].cardsNum+1),r.push(e.current[2]-1);for(var i=e.current[2];i<a.length&&e.current[2]%t[c].cardsNum!==0;i++)r.push(e.current[2]),e.current[2]=e.current[2]+1;break}if(s<0){e.current[2]=e.current[2]-n-(Math.abs(s)*t[c].cardsNum+1)+2,r.push(e.current[2]-1);for(var o=e.current[2];o<a.length&&e.current[2]%t[c].cardsNum!==0;o++)r.push(e.current[2]),e.current[2]=e.current[2]+1;break}}return r}(t,x,r.cards.length,e.appointments);c((function(e){return Object(i.a)(Object(i.a)({},e),{},{pag:r.pag.map((function(e,n){return n===t.current[0]||n===t.current[1]?!e:e})),cards:s})}))};return Object(u.jsxs)(u.Fragment,{children:[1===e.status?Object(u.jsx)("h2",{children:"Your Active Appointments in local Time"}):Object(u.jsx)("h2",{children:"Your previous Appointments in local Time"}),Object(u.jsxs)("div",{className:" view-appointment-animator flex-row gap-8p fjust-around",children:[e.isLoading&&Object(u.jsx)(b,{color:"dark"}),!e.isLoading&&e.appointments&&r.cards&&r.cards.map((function(t){return Object(u.jsx)("div",{children:Object(u.jsx)(m,{card:e.appointments[t],dispatch:e.dispatch})},t)}))]}),e.appointments&&0!==e.appointments.length&&Object(u.jsxs)("div",{className:"pag-app flex-row gap-8p fjust-center",children:[Object(u.jsx)("span",{children:Object(u.jsx)("i",{onClick:function(e){o(e)},className:"fas fa-chevron-left"})}),r.pag&&r.pag.map((function(e,t){return Object(u.jsx)("span",{onClick:function(e){-1===e.target.className.search("active")&&p(e)},className:"k"+t+(!0===e?" active":""),children:t+1},t)})),Object(u.jsx)("span",{children:Object(u.jsx)("i",{onClick:function(e){o(e)},className:"fas fa-chevron-right"})})]})]})},v=n(200),y=n.n(v),k=(n(199),function(e){var t=new Date,n=e.appointment[0].date.split("-")[0],a=e.appointment[0].date.split("-")[1],r=e.appointment[0].date.split("-")[2];return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(y.a,{selected:new Date(n,a-1,r,t.getHours()),onChange:function(t){return e.appointment[1]((function(e){return Object(i.a)(Object(i.a)({},e),{},{date:Object(l.a)(t,"isoDate")})}))},minDate:new Date,disabledKeyboardNavigation:!0,withPortal:!0,dateFormat:"yyyy-MM-dd"})})}),N=n(30),w=n(12),C=function(e,t){switch(t.type){case"successPets":return Object(i.a)(Object(i.a)({},e),{},{responseError:"",isLoading:!1,pets:t.data});case"successStmems":return Object(i.a)(Object(i.a)({},e),{},{responseError:"",isLoading:!1,stmems:t.data});case"successTimes":return Object(i.a)(Object(i.a)({},e),{},{responseError:"",isLoading:!1,timesArr:t.data});case"start":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!0});case"startCreate":return Object(i.a)(Object(i.a)({},e),{},{createLoading:!0});case"checkModalExit":return Object(i.a)(Object(i.a)({},e),{},{checkModal:!1});case"checkModalEnter":return Object(i.a)(Object(i.a)({},e),{},{checkModal:!0});case"finalConfirm":return Object(i.a)(Object(i.a)({},e),{},{finalConfirm:!0});case"successCreate":return Object(i.a)(Object(i.a)({},e),{},{createResponse:t.data,responseError:"",createLoading:!1,finalConfirm:!1,checkModal:!1});case"failureCreate":return Object(i.a)(Object(i.a)({},e),{},{responseError:t.error,createLoading:!1,finalConfirm:!1,checkModal:!1});case"failure":return Object(i.a)(Object(i.a)({},e),{},{responseError:t.error,isLoading:!1});case"errorModalExit":return Object(i.a)(Object(i.a)({},e),{},{responseError:""})}},_=function(e){var t=Object(j.useReducer)(C,e),n=Object(s.a)(t,2);return[n[0],n[1]]},E=n(33),L=n(5),A=n(6),T={initial:{opacity:0},final:{opacity:1,transition:{delay:.4,duration:.8}},exit:{opacity:0,transition:{duration:.8}}},M={isLoading:!1,pets:[],stmems:[],timesArr:null,responseError:"",createResponse:"",checkModal:!1,finalConfirm:!1,createLoading:!1},D=function(){var e=Object(j.useContext)(w.a),t=Object(j.useContext)(A.a).setPageIsLoading,n=Object(N.a)(),a=Object(j.useState)([!0,!1,!1,!1]),d=Object(s.a)(a,2),m=d[0],h=d[1],O=Object(j.useRef)([0,0]),x=_(M),g=Object(s.a)(x,2),v=g[0],y=g[1],C=Object(j.useState)({appointment_type:"",stmem_id:"",pet_id:"",hour:"",date:Object(l.a)(new Date,"isoDate"),stmemName:"",petName:""}),D=Object(s.a)(C,2),S=D[0],R=D[1];Object(j.useEffect)((function(){var a=!0,s=function(){var t=Object(c.a)(r.a.mark((function t(){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("".concat("https://pet-verse-app.herokuapp.com/","appointment/appointmentstimes?stmem_id=").concat(S.stmem_id,"&date=").concat(S.date),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:(c=t.sent)&&a&&y({type:"successTimes",data:c}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a&&y({type:"failure",error:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return!0===m[3]&&(a&&y({type:"start"}),s()),function(){t(!1),a=!1}}),[S.date,S.stmem_id,e.token,y,n,m,t]),Object(j.useEffect)((function(){var a=!0,s=function(){var t=Object(c.a)(r.a.mark((function t(){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("".concat("https://pet-verse-app.herokuapp.com/","users/me/pets"),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:(c=t.sent)&&a&&y({type:"successPets",data:c}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a&&y({type:"failure",error:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),i=function(){var t=Object(c.a)(r.a.mark((function t(){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("".concat("https://pet-verse-app.herokuapp.com/","appointment/staffmems?appointment_type=").concat(S.appointment_type),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:(c=t.sent)&&a&&y({type:"successStmems",data:c}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a&&y({type:"failure",error:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return!0!==m[1]||v.pets.length||(a&&y({type:"start"}),s()),!0===m[2]&&(a&&y({type:"start"}),i()),function(){t(!1),a=!1}}),[m,e.token,n,y,v.pets.length,S.appointment_type,t]);var z=function(e){"next"===e.target.id?O.current[1]+1!==m.length&&(O.current[0]=O.current[1],O.current[1]=O.current[1]+1,h((function(){return m.map((function(e,t){return t===O.current[0]||t===O.current[1]?!e:e}))}))):O.current[1]-1>=0&&(O.current[0]=O.current[1],O.current[1]=O.current[1]-1,h((function(){return m.map((function(e,t){return t===O.current[0]||t===O.current[1]?!e:e}))})))},B=function(e){var t,n="";switch(e.target.nodeName){case"IMG":case"P":t=e.target.parentNode.id,n=e.target.parentNode.getAttribute("refid");break;default:t=e.target.id,n=e.target.getAttribute("refid")}m[0]&&R((function(e){return Object(i.a)(Object(i.a)({},e),{},{appointment_type:t})})),m[1]&&R((function(e){return Object(i.a)(Object(i.a)({},e),{},{pet_id:t,petName:v.pets[n].name})})),m[2]&&R((function(e){return Object(i.a)(Object(i.a)({},e),{},{stmem_id:t,stmemName:v.stmems[n].first_name+" "+v.stmems[n].last_name})}))};return Object(j.useEffect)((function(){var a=!0;if(v.finalConfirm){var s=function(){var t=Object(c.a)(r.a.mark((function t(){var c,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a&&y({type:"startCreate"}),c={appointment_type:S.appointment_type,stmem_id:S.stmem_id,pet_id:S.pet_id,hour:S.hour,date:S.date},t.prev=2,t.next=5,n("".concat("https://pet-verse-app.herokuapp.com/","users/me/appointments"),"POST",JSON.stringify(c),{Authorization:"Bearer ".concat(e.token),"Content-Type":"application/json"});case 5:(s=t.sent)&&a&&y({type:"successCreate",data:s.response}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a&&y({type:"failureCreate",error:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}();s()}return function(){t(!1),a=!1}}),[v.finalConfirm,y,e.token,S.stmem_id,S.appointment_type,S.date,S.hour,S.pet_id,n,t]),Object(j.useEffect)((function(){t(v.createLoading)}),[v.createLoading,t]),Object(u.jsxs)(u.Fragment,{children:[v.responseError&&Object(u.jsx)(E.a,{modalClass:"error",header:"Oops!!",body:v.responseError,dispatch:y}),v.checkModal&&Object(u.jsx)(E.a,{modalClass:"check",header:"Check your appointment data!",body:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("p",{children:["Appointment: ",Object(u.jsx)("span",{children:" "+S.appointment_type})," "]}),Object(u.jsxs)("p",{children:["For your pet: ",Object(u.jsx)("span",{children:" "+S.petName})]}),Object(u.jsxs)("p",{children:["staff: ",Object(u.jsx)("span",{children:" "+S.stmemName})]}),Object(u.jsxs)("p",{children:["Date:  ",Object(u.jsx)("span",{children:" "+S.date})]}),Object(u.jsxs)("p",{children:["At:  ",Object(u.jsx)("span",{children:" "+(parseInt(S.hour)+3)<10?"0"+(parseInt(S.hour)+3)+":00":parseInt(S.hour)+3+":00"})]})]}),dispatch:y}),v.createResponse&&Object(u.jsx)(E.a,{modalClass:"success",header:"Success!!",body:v.createResponse,dispatch:y,refresh:!0}),Object(u.jsx)(p.a,{children:m[0]&&Object(u.jsxs)(o.a.div,{variants:T,initial:"initial",animate:"final",exit:"exit",className:"make-appointment-slider flex-col falign-center gap-24p",children:[Object(u.jsx)("h1",{children:"What appointment do you want to make ?"}),Object(u.jsxs)("div",{className:"appointment-types flex-row gap-32p fjust-center",children:[Object(u.jsxs)("div",{id:"Examination",className:"Examination"===S.appointment_type?"appointment-type flex-col gap-8p falign-center active ":"appointment-type flex-col gap-8p falign-center",onClick:function(e){return B(e)},children:[Object(u.jsx)("img",{src:"/media/imgs/pet-examination.png",alt:""}),Object(u.jsx)("p",{className:"type",children:"Examination"})]}),Object(u.jsxs)("div",{id:"Training",className:"Training"===S.appointment_type?"appointment-type flex-col gap-8p falign-center active ":"appointment-type flex-col gap-8p falign-center",onClick:function(e){return B(e)},children:[Object(u.jsx)("img",{src:"/media/imgs/pet-training.png",alt:""}),Object(u.jsx)("p",{className:"type",children:"Training"})]}),Object(u.jsxs)("div",{id:"Grooming",className:"Grooming"===S.appointment_type?"appointment-type flex-col gap-8p falign-center active ":"appointment-type flex-col gap-8p falign-center",onClick:function(e){return B(e)},children:[Object(u.jsx)("img",{src:"/media/imgs/pet-grooming.png",alt:""}),Object(u.jsx)("p",{className:"type",children:"Grooming"})]}),Object(u.jsxs)("div",{id:"Adoption",className:"Adoption"===S.appointment_type?"appointment-type flex-col gap-8p falign-center active ":"appointment-type flex-col gap-8p falign-center",onClick:function(e){return B(e)},children:[Object(u.jsx)("img",{src:"/media/imgs/pet-adoption.png",alt:""}),Object(u.jsx)("p",{style:{textAlign:"center"},className:"type",children:"Pet Submission"})]})]}),Object(u.jsx)("button",{id:"next",className:""===S.appointment_type?"btn-rec-purple next disabled":"btn-rec-purple next",onClick:function(e){return z(e)},disabled:""===S.appointment_type,children:"Next"})]})}),Object(u.jsxs)(p.a,{children:[v.isLoading&&m[1]&&Object(u.jsx)(b,{color:"light",top:"30%",left:"50%"}),m[1]&&!v.isLoading&&Object(u.jsxs)(o.a.div,{variants:T,initial:"initial",animate:"final",exit:"exit",className:"make-appointment-slider flex-col falign-center gap-24p",children:[Object(u.jsx)("h1",{children:"Select a Pet:"}),Object(u.jsxs)("div",{className:"appointment-types flex-row fjust-center gap-24p",children:[v&&0!==v.pets.length&&v.pets.map((function(e,t){return Object(u.jsxs)("div",{id:e.id,refid:t,className:S.pet_id===e.id.toString()?"appointment-type flex-col fjust-start gap-16p falign-center active":"appointment-type flex-col fjust-start gap-16p falign-center",onClick:function(e){return B(e)},children:[Object(u.jsx)("img",{src:e.photo?URL.createObjectURL(new Blob([new Uint8Array(e.photo.data)])):"/media/imgs/cat.png",alt:"cat"}),Object(u.jsx)("p",{children:e.name})]},t)})),v&&0===v.pets.length&&Object(u.jsxs)("div",{className:"flex-col falign-center gap-24p",style:{width:"70%"},children:[Object(u.jsx)("p",{style:{color:"white"},children:"Looks like you have no registered pets, you can register your pet from here"}),Object(u.jsx)(L.b,{to:"/registerpet",state:{from:"/appointment"},className:"btn-r btn-r-blue",style:{width:"9rem",padding:".5rem"},children:"Register pet"})]})]}),Object(u.jsxs)("div",{className:"appointment-buttons-wrapper flex-row fjust-around button-wrapper",children:[Object(u.jsx)("button",{id:"back",className:"btn-rec-purple next",onClick:function(e){return z(e)},children:"Back"}),Object(u.jsx)("button",{id:"next",className:""===S.pet_id?"btn-rec-purple next disabled":"btn-rec-purple next",onClick:function(e){return z(e)},disabled:""===S.pet_id,children:"Next"})]})]})]}),Object(u.jsxs)(p.a,{children:[v.isLoading&&m[2]&&Object(u.jsx)(b,{color:"light",top:"30%",left:"50%"}),m[2]&&!v.isLoading&&Object(u.jsxs)(o.a.div,{variants:T,initial:"initial",animate:"final",exit:"exit",className:"make-appointment-slider flex-col falign-center gap-24p",children:[Object(u.jsx)("h1",{children:"Select staff:"}),Object(u.jsx)("div",{className:"appointment-types flex-row fjust-center gap-24p",children:v&&0!==v.stmems.length&&v.stmems.map((function(e,t){return Object(u.jsxs)("div",{id:e.id,refid:t,className:S.stmem_id===e.id.toString()?"appointment-type flex-col fjust-start gap-16p falign-center active":"appointment-type flex-col fjust-start gap-16p falign-center",onClick:function(e){return B(e)},children:[Object(u.jsx)("img",{src:e.photo?URL.createObjectURL(new Blob([new Uint8Array(e.photo.data)])):"/media/imgs/staff.png",alt:"cat"}),Object(u.jsx)("p",{children:e.first_name+" "+e.last_name})]},t)}))}),Object(u.jsxs)("div",{className:"appointment-buttons-wrapper flex-row fjust-around button-wrapper",children:[Object(u.jsx)("button",{id:"back",className:"btn-rec-purple next",onClick:function(e){return z(e)},children:"Back"}),Object(u.jsx)("button",{id:"next",className:""===S.stmem_id?"btn-rec-purple next disabled":"btn-rec-purple next",onClick:function(e){return z(e)},disabled:""===S.stmem_id,children:"Next"})]})]})]}),Object(u.jsxs)(p.a,{children:[v.isLoading&&m[3]&&Object(u.jsx)(b,{color:"light",top:"30%",left:"50%"}),m[3]&&!v.isLoading&&Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(o.a.div,{variants:T,initial:"initial",animate:"final",exit:"exit",className:"make-appointment-slider flex-col falign-center gap-24p",children:[Object(u.jsx)("h1",{children:"Select Date"}),Object(u.jsx)("p",{style:{color:"white",margin:"auto",width:"80%",textAlign:"center"},children:" *The working hours of the clinic are according to the Turkish local time*"}),Object(u.jsx)("div",{className:"appointment-types flex-row fjust-center gap-24p ",children:Object(u.jsxs)("div",{className:"date-picker-input",children:[Object(u.jsx)("img",{src:"/media/imgs/calendar.png",alt:"calendar"}),Object(u.jsx)(k,{appointment:[S,R]})]})}),Object(u.jsxs)("div",{className:"appointment-types flex-row fjust-center gap-16p date-container",children:[v.timesArr&&0!==v.timesArr.availableTimes.length&&v.timesArr.CLINIC_WORKING_HOURS.map((function(e,t){var n=e+3;return Object(u.jsx)(f.a.Fragment,{children:v.timesArr.availableTimes.includes(e)?Object(u.jsx)("p",{className:S.hour===e.toString()?"time active":"time",onClick:function(e){return function(e){var t=(parseInt(e.target.innerHTML.substring(0,2))-3).toString();R((function(e){return Object(i.a)(Object(i.a)({},e),{},{hour:t})}))}(e)},children:"".concat(n>=10?n:"0"+n,":00 ").concat(n>11?"PM":"AM")}):Object(u.jsx)("p",{className:"time not-available",children:"".concat(n>=10?n:"0"+n,":00 ").concat(n>11?"PM":"AM")})},t)})),v.timesArr&&0===v.timesArr.availableTimes.length&&Object(u.jsx)("p",{style:{color:"white"},children:"No Available appointments on the day specified"})]}),Object(u.jsxs)("div",{className:"appointment-buttons-wrapper flex-row fjust-around button-wrapper",children:[Object(u.jsx)("button",{id:"back",className:"btn-rec-purple next",onClick:function(e){return z(e)},children:"Back"}),Object(u.jsx)("button",{id:"next",className:""===S.hour?"btn-rec-purple next confirm disabled":"btn-rec-purple next confirm",disabled:""===S.hour,onClick:function(){return y({type:"checkModalEnter"})},children:"Confirm"})]})]})})]})]})},S=function(e,t){switch(t.type){case"start":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!0});case"startDeleting":return Object(i.a)(Object(i.a)({},e),{},{deleteLoading:!0});case"checkModalExit":return Object(i.a)(Object(i.a)({},e),{},{checkModal:!1});case"checkModalEnter":return Object(i.a)(Object(i.a)({},e),{},{checkModal:!0,appointmentToDelete:t.appointmentToDelete});case"finalConfirm":return Object(i.a)(Object(i.a)({},e),{},{finalConfirm:!0});case"success":return Object(i.a)(Object(i.a)({},e),{},{responseError:"",isLoading:!1,activeAppointments:t.active,pastAppointments:t.past});case"failure":return Object(i.a)(Object(i.a)({},e),{},{responseError:t.error,isLoading:!1});case"successDelete":return Object(i.a)(Object(i.a)({},e),{},{responseError:"",isLoading:!1,finalConfirm:!1,checkModal:!1,deleteResponse:t.data.result,deleteLoading:!1});case"failureDelete":return Object(i.a)(Object(i.a)({},e),{},{responseError:t.error,isLoading:!1,finalConfirm:!1,checkModal:!1,deleteLoading:!1});case"errorModalExit":return Object(i.a)(Object(i.a)({},e),{},{responseError:""})}},R=function(e){var t=Object(j.useReducer)(S,e),n=Object(s.a)(t,2);return[n[0],n[1]]},z={isLoading:!1,checkModal:!1,finalConfirm:!1,responseError:"",deleteResponse:"",activeAppointments:[],pastAppointments:[],appointmentToDelete:null,deleteLoading:!1};t.default=function(){var e=R(z),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(N.a)(),o=Object(j.useContext)(w.a),p=Object(j.useContext)(A.a).setPageIsLoading;return Object(j.useEffect)((function(){var e=!0,t=function(){var t=Object(c.a)(r.a.mark((function t(){var n,c,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&a({type:"start"}),t.prev=1,t.next=4,i("".concat("https://pet-verse-app.herokuapp.com/","users/me/appointments"),"GET",null,{Authorization:"Bearer ".concat(o.token)});case 4:(n=t.sent).arrayToSend&&(c=[],s=[],n.arrayToSend.forEach((function(e){1===e.status&&0===e.confirmed?c.push(e):s.push(e)})),e&&a({type:"success",active:c,past:s})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e&&a({type:"failure",error:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}}),[o.token,a,i]),Object(j.useEffect)((function(){var e=!0,t=function(){var t=Object(c.a)(r.a.mark((function t(){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&a({type:"startDeleting"}),t.prev=1,t.next=4,i("".concat("https://pet-verse-app.herokuapp.com/","users/me/appointments/").concat(n.appointmentToDelete),"DELETE",null,{Authorization:"Bearer ".concat(o.token)});case 4:(c=t.sent)&&e&&a({type:"successDelete",data:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e&&a({type:"failureDelete",error:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return n.finalConfirm&&t(),function(){e=!1}}),[n.finalConfirm,o.token,i,a,n.appointmentToDelete]),Object(j.useEffect)((function(){p(n.deleteLoading)}),[p,n.deleteLoading]),Object(u.jsxs)(u.Fragment,{children:[n.responseError&&Object(u.jsx)(E.a,{modalClass:"error",header:"Oops!!",body:n.responseError,dispatch:a}),n.checkModal&&Object(u.jsx)(E.a,{modalClass:"check",header:"",body:Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("p",{children:"Are you sure you want to cancel the appointment ?"})}),dispatch:a}),n.deleteResponse&&Object(u.jsx)(E.a,{modalClass:"success",header:"Success!!",body:n.deleteResponse,dispatch:a,refresh:!0}),Object(u.jsxs)("div",{className:"home-container flex-col  gap-24p",children:[Object(u.jsx)("div",{className:"make-appointment-wrapper",children:Object(u.jsx)(D,{})}),Object(u.jsxs)("div",{className:"view-appointment-wrapper flex-row falign-center fjust-start gap-36p",children:[Object(u.jsx)("div",{className:"view-appointment-wrapper ref",children:Object(u.jsx)(g,{status:1,isLoading:n.isLoading,appointments:n.activeAppointments,dispatch:a})}),Object(u.jsx)("div",{className:"view-appointment-wrapper ref",children:Object(u.jsx)(g,{status:0,isLoading:n.isLoading,appointments:n.pastAppointments,dispatch:a})})]})]})]})}},30:function(e,t,n){"use strict";var a=n(8),r=n.n(a),c=n(11),s=n(1);t.a=function(){var e=Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,s,i,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"GET",a=o.length>2&&void 0!==o[2]?o[2]:null,c=o.length>3&&void 0!==o[3]?o[3]:{},e.prev=3,e.next=6,fetch(t,{method:n,headers:c,body:a});case 6:return s=e.sent,e.next=9,s.json();case 9:if(i=e.sent,s.ok){e.next=12;break}throw new Error(i.error);case 12:return e.abrupt("return",i);case 15:throw e.prev=15,e.t0=e.catch(3),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),[]);return e}},33:function(e,t,n){"use strict";var a=n(4),r=n(55),c=n(267),s=n(1),i={initial:{y:"-100vh"},final:{y:0},exit:{y:"-100vh"}},o=n(2),p=n(0),l=i;t.a=function(e){var t=Object(s.useState)(!0),n=Object(a.a)(t,2),i=n[0],u=n[1],d=Object(o.h)();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"modal modal_".concat(e.modalClass),children:Object(p.jsx)(r.a,{children:i&&Object(p.jsxs)(c.a.div,{variants:l,initial:"initial",animate:"final",exit:"exit",className:"modal-container modal-container__".concat(e.modalClass," flex-col gap-16p falign-center"),children:[Object(p.jsx)("header",{className:"modal-header modal-header__".concat(e.modalClass),children:e.header}),Object(p.jsx)("div",{className:"flex-col gap-8p modal-body modal-body__".concat(e.modalClass),children:e.body}),Object(p.jsxs)("footer",{className:"modal-footer modal-footer__".concat(e.modalClass),children:[("check"===e.modalClass||"edit"===e.modalClass)&&Object(p.jsx)("button",{onClick:function(){u(!1),setTimeout((function(){e.dispatch({type:"finalConfirm"})}),300)},className:"btn-rec modal-button modal-button__confirm",children:"Confirm "}),Object(p.jsx)("button",{onClick:function(){return u(!1),e.refresh?setTimeout((function(){window.location.reload()}),300):e.redirectTo?setTimeout((function(){d(e.redirectTo)}),300):void setTimeout((function(){e.dispatch({type:"".concat(e.modalClass,"ModalExit")})}),300)},className:"btn-rec modal-button modal-button__".concat(e.modalClass),children:"success"===e.modalClass?"OK":"check"===e.modalClass||"edit"===e.modalClass?"Cancel":"Exit"})]})]})})})})}}}]);
//# sourceMappingURL=35.5d45d1ea.chunk.js.map